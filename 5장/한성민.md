# 5ì¥_ì„œë¹„ìŠ¤ ì¶”ìƒí™”

---
[ğŸ“– ë…¸ì…˜ ë§í¬](https://far-chess-c7b.notion.site/5-_-d1592d0e107b4e5ebf170e09eeb536c4?pvs=4)

# ì‚¬ìš©ì ë ˆë²¨ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€

---

> **ìš”êµ¬ì‚¬í•­**
>
- ì‚¬ìš©ìì˜ ë ˆë²¨ì€ BASIC, SILVER, GOLD ì„¸ ê°€ì§€ ì¤‘ í•˜ë‚˜ë‹¤.
- ì‚¬ìš©ìê°€ ì²˜ìŒ ê°€ì…í•˜ë©´ BASIC ë ˆë²¨ì´ ë˜ë©°, ì´í›„ í™œë™ì— ë”°ë¼ì„œ í•œ ë‹¨ê³„ì”© ì—…ê·¸ë ˆì´ë“œë 
  ìˆ˜ ìˆë‹¤.
- ê°€ì… í›„ 50íšŒ ì´ìƒ ë¡œê·¸ì¸ì„ í•˜ë©´ BASICì—ì„œ SILVER ë ˆë²¨ì´ ëœë‹¤.
- SILVER ë ˆë²¨ì´ë©´ì„œ 30ë²ˆ ì´ìƒ ì¶”ì²œì„ ë°›ìœ¼ë©´ GOLD ë ˆë²¨ì´ ëœë‹¤.
- ì‚¬ìš©ì ë ˆë²¨ì˜ ë³€ê²½ ì‘ì—…ì€ ì¼ì •í•œ ì£¼ê¸°ë¥¼ ê°€ì§€ê³  ì¼ê´„ì ìœ¼ë¡œ ì§„í–‰ëœë‹¤. ë³€ê²½ ì‘ì—… ì „ì—ëŠ”
  ì¡°ê±´ì„ ì¶©ì¡±í•˜ë”ë¼ë„ ë ˆë²¨ì˜ ë³€ê²½ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

## 1. í•„ë“œ ì¶”ê°€

### Level ENUM

User í´ë˜ìŠ¤ì— ì‚¬ìš©ìì˜ ë ˆë²¨ì„ ì €ì¥í•  í•„ë“œë¥¼ ì¶”ê°€í•˜ì. ì–´ë–¤ íƒ€ì…ìœ¼ë¡œ ë„£ì–´ì•¼ í• ê¹Œ?

1. DBì— varchar íƒ€ì…ìœ¼ë¡œ ì„ ì–¸

â†’ DB ìš©ëŸ‰ì„ ì°¨ì§€í•´ì„œ ë³„ë¡œ ì¢‹ì€ ë°©ì‹ì€ ì•„ë‹Œ ê±° ê°™ë‹¤.

1. ê° ë ˆë²¨ì„ ì½”ë“œí™”í•´ì„œ ìˆ«ìë¡œ ë„£ê¸°

â†’ ê°€ë²¼ì›Œì„œ ì¢‹ë‹¤.

ê·¸ëŸ¬ë©´ ìë°”ì˜ Userì— ì¶”ê°€í•  í”„ë¡œí¼í‹° íƒ€ì…ë„ ìˆ«ìë¡œ í•˜ë©´ ë ê¹Œ?

â†’ ê·¸ë ‡ì§€ ì•Šë‹¤. Type-Safeí•˜ì§€ ì•Šë‹¤.

`ì •ìˆ˜í˜• ìƒìˆ˜ë¡œ ì •ì˜í•œ ê²½ìš°`

```java
class User {
		private static final int BASIC = 1;
		private static final int SILVER = 2;
		private static final int GOLD = 3;
		
		int level;
		
		public void setLevel(int level) {
				this.level = level;
	  }
}
```

ì´ ê²½ìš°ì—, `setLevel()`ì— ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì •ë³´ë¥¼ ë„£ëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆê³ , ì»´íŒŒì¼ëŸ¬ê°€ ì²´í¬í•  ìˆ˜ ì—†ë‹¤.

ê·¸ë˜ì„œ ìˆ«ì íƒ€ì…ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ìë°” 5ì—ì„œ ì œê³µí•˜ëŠ” ENUMì„ ì´ìš©í•˜ëŠ” ê²Œ ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ë‹¤.

```java
public enum Level {
	GOLD(3), SILVER(2), BASIC(1);

	private final int value;

	Level(int value) {
		this.value = value;
	}

	public int intValue() {
		return value;
	}
	
	public static Level valueOf(int value) {
		switch(value) {
			case 1: return BASIC;
			case 2: return SILVER;
			case 3: return GOLD;
			default: throw new AssertionError("Unknown value: " + value);
		}
	}
}
```

ì´ë ‡ê²Œ ë§Œë“¤ë©´ DBì— ì €ì¥í•  ë•Œ int íƒ€ì…ì˜ ê°’ì„ ê°–ê³  ìˆì§€ë§Œ, Level íƒ€ì…ì˜ ì˜¤ë¸Œì íŠ¸ì´ê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### User í•„ë“œ ì¶”ê°€

```java
public class User {
    ...
    private Level level;
    private int login;
    private int recommend;
    
    // getter, setter
}
```

### UserDaoJdbc ìˆ˜ì •

```java
	private RowMapper<User> userMapper =
			(rs, rowNum) -> {
				User user = new User();
				user.setId(rs.getString("id"));
				user.setName(rs.getString("name"));
				user.setPassword(rs.getString("password"));
				user.setEmail(rs.getString("email"));
				// ì¶”ê°€
				user.setLevel(Level.valueOf(rs.getInt("level")));
				user.setLogin(rs.getInt("login"));
				user.setRecommend(rs.getInt("recommend"));
				return user;
			};
			
		public void add(User user) {
				this.jdbcTemplate.update(
						"insert into users(id, name, password, email, level, login, recommend) " +
								"values(?,?,?,?,?,?,?)",
						user.getId(), user.getName(), user.getPassword(), user.getEmail(),
						user.getLevel().intValue(), user.getLogin(), user.getRecommend());
	}
```

`add()`

levelì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” Level ì˜¤ë¸Œì íŠ¸ë¡œ ê´€ë¦¬ë˜ì§€ë§Œ, DBì—ì„œëŠ” ì •ìˆ˜í˜• ê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë„£ì–´ì¤€ë‹¤.

`userMapper`

ë°˜ëŒ€ë¡œ ì¡°íšŒë¥¼ í–ˆì„ ë•ŒëŠ” DBì—ì„œ intë¡œ level ì •ë³´ë¥¼ ê°€ì ¸ì™€ Level íƒ€ì…ì˜ Enum ì˜¤ë¸Œì íŠ¸ë¡œ ë§Œë“¤ì–´ì„œ ë„£ì–´ì¤€ë‹¤.

## 2. UserService.upgradeLevels()

ë ˆë²¨ ê´€ë¦¬ ê¸°ëŠ¥ì€ UserDaoì˜ `getAll()`ë¡œ ì‚¬ìš©ìë¥¼ ë‹¤ ê°€ì ¸ì™€ì„œ ì‚¬ìš©ìë³„ë¡œ ë ˆë²¨ ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì„ ì§„í–‰í•˜ê³ , `update()`

í˜¸ì¶œí•´ DBì— ë„£ìœ¼ë©´ ëœë‹¤.

ê·¼ë° ì‚¬ìš©ì ê´€ë¦¬ ë¡œì§ì€ ì–´ë””ë‹¤ ë‘ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?

- UserDaoì— ë„£ì„ ê²½ìš°
    - DAOëŠ” ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ê°€ì ¸ì˜¤ê³  ì¡°ì‘í•  ì§€ë¥¼ ë‹¤ë£¨ëŠ” ê³³ì´ì§€, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‘ëŠ” ê³³ì€ ì•„ë‹ˆë‹¤.

â†’ ì‚¬ìš©ì ê´€ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ì„ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤. (`UserService`)

![UserService ì˜ì¡´ ê´€ê³„](https://github.com/user-attachments/assets/e939a88e-bee3-4deb-bf0d-d7b16cc639fb)

`UserService`

```java
public class UserService {
    private UserDao userDao;

    // UserDao DI
    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }
```

## ì½”ë“œ ê°œì„ 

### upgradeLevels() ë©”ì†Œë“œ ì½”ë“œì˜ ë¬¸ì œì 

`upgradeLevels()`

```java
  public void upgradeLevels() {
    List<User> users = userDao.getAll();
    for (User user : users) {
      Boolean changed = null;
      if (user.getLevel() == Level.BASIC && user.getLogin() >= 50) {
        user.setLevel(Level.SILVER);
        changed = true;
      } else if (user.getLevel() == Level.SILVER && user.getRecommend() > 30) {
        user.setLevel(Level.GOLD);
        changed = true;
      } else if (user.getLevel() == Level.GOLD) {
        changed = false;
      } else {
        changed = false;
      }
      if (changed) {
        userDao.update(user);
      }
    }
  }
```

1. for ë£¨í”„ ì†ì— ë“¤ì–´ìˆëŠ” if/elseif/else ë¸”ë¡ë“¤ì´ ì½ê¸° ë¶ˆí¸í•˜ë‹¤.
2. ë ˆë²¨ì˜ ë³€í™” ë‹¨ê³„, ì—…ê·¸ë ˆì´ë“œ ì¡°ê±´, ì¡°ê±´ì´ ì¶©ì¡±ëì„ ë•Œ ì‘ì—…ì´ í•œë° ì„ì—¬ ìˆì–´ ë¡œì§ì„ ì´í•´í•˜ê¸° ì‰½ì§€ ì•Šë‹¤.
3. `changed` í”Œë˜ê·¸ë¥¼ ë‘ê³  ë§ˆì§€ë§‰ì— ì´ë¥¼ í™•ì¸í•´ì„œ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒë„ ê¹”ë”í•˜ì§€ ì•Šë‹¤.

```java
if (user.getLevel() == Level.BASIC && user.getLogin() >= 50) {
        user.setLevel(Level.SILVER);
        changed = true;
}
```

- `user.getLevel() == Level.BASIC` : í˜„ì¬ ë ˆë²¨ íŒŒì•…
- `user.getLogin() >= 50` : ì—…ê·¸ë ˆì´ë“œ ì¡°ê±´
- `user.setLevel(Level.SILVER);` : ë‹¤ìŒ ë‹¨ê³„ì˜ ë ˆë²¨ì´ ë¬´ì—‡ì´ê³  ì—…ê·¸ë ˆì´ë“œë¥¼ ìœ„í•œ ì‘ì—…ì€ ì–´ë–¤ ê²ƒì¸ì§€ ë‹´ê²¨ ìˆë‹¤.
- `changed = true;` : ì˜ë¯¸ ì—†ìŒ
    - `if (changed) { userDao.update(user); }` : ì´ ì‘ì—…ì—ì„œ í•„ìš”

ì´ëŸ° if ì¡°ê±´ ë¸”ë¡ì´ ë ˆë²¨ ê°œìˆ˜ ë§Œí¼ ë°˜ë³µëœë‹¤. ë§Œì•½ ìƒˆë¡œìš´ ë ˆë²¨ì´ ì¶”ê°€ë˜ë©´, Level Enumë„ ìˆ˜ì •í•˜ê³  if ë¸”ë¡ë„ ì¶”ê°€í•´ì•¼ í•œë‹¤.

ì´ì™¸ì—ë„ ë©”ì†Œë“œëŠ” ì ì  ê¸¸ì–´ì§€ê³  ë³µì¡í•´ì§€ë©°, ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.

### upgradeLevels() ë¦¬íŒ©í† ë§

ê°€ì¥ ì¶”ìƒì ì¸ ë ˆë²¨ì—ì„œ ë¡œì§ì„ ì‘ì„±í•´ë³´ì.

`ê¸°ë³¸ ì‘ì—… íë¦„ë§Œ ë‚¨ê²¨ë‘” ì½”ë“œ`

```java
public void upgradeLevels() {
		List<User> users = userDao.getAll();
      for (User user : users) {
        if (canUpgradeLevel(user)) {
          upgradeLevel(user);
        }
      }
}
```

â†’ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ + ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥í•œì§€ í™•ì¸ + ì—…ê·¸ë ˆì´ë“œ

â†’ ì‘ì—…ì˜ íë¦„ì„ ì¶”ìƒì ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•¨ìœ¼ë¡œì¨ `upgradeLevels()` ë©”ì†Œë“œê°€ ì–´ë–¤ ì‘ì—…ì„ í•˜ëŠ”ì§€ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.

`canUpgradeLevel()`

```java
  private boolean canUpgradeLevel(User user) {
    Level currentLevel = user.getLevel();
    switch (currentLevel) {
      case BASIC:
        return (user.getLogin() >= MIN_LOGCOUNT_FOR_SILVER);
      case SILVER:
        return (user.getRecommend() >= MIN_RECCOMEND_FOR_GOLD);
      case GOLD:
        return false;
      default:
        throw new IllegalArgumentException("Unknown Level: " + currentLevel);
    }
  }
```

`upgradeLevel()`

```java
private void upgradeLevel(User user) {
		if (user.getLevel() == Level.BASIC) user.setLevel(Level.SILVER);
		else if (user.getLevel() == Level.SLIVER) user.setLevel(Level.GOLD);
		userDao.update(user);
}
```

í•˜ì§€ë§Œ `upgradeLevel()`ì½”ë“œì—ì„œëŠ” ë‹¤ìŒ ë¬¸ì œê°€ ìˆë‹¤.

- `setLevel()`ì„ í†µí•´ Levelì˜ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë…¸ê³¨ì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ ìˆë‹¤.
- GOLD ë ˆë²¨ì¸ ì‚¬ìš©ìë¥¼ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ì•„ë¬´ê²ƒë„ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì˜ë¯¸ì—†ëŠ” ì—…ë°ì´íŠ¸ë§Œ ì§„í–‰
- ë ˆë²¨ì´ ëŠ˜ì–´ë‚˜ë©´ if ë¬¸ì´ ê¸¸ì–´ì§„ë‹¤.

ê·¸ë˜ì„œ ë ˆë²¨ì˜ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ê²°ì •í•˜ëŠ” ì¼ì€ `Level`ì—ê²Œ ë§¡ê¸°ë©´ ëœë‹¤.

```java
public enum Level {
  // ë‹¤ìŒ ë‹¨ê³„ ë ˆë²¨ ì •ë³´ ì¶”ê°€
	GOLD(3, null), SILVER(2, GOLD), BASIC(1, SILVER);

	private final int value;
	private final Level next;

	Level(int value, Level next) {
		this.value = value;
		this.next = next;
	}

	public int intValue() {
		return value;
	}

	public Level nextLevel() {
		return this.next;
	}

	public static Level valueOf(int value) {
            return switch (value) {
              case 1 -> BASIC;
              case 2 -> SILVER;
              case 3 -> GOLD;
              default -> throw new AssertionError("Unknown value: " + value);
    };
	}
}
```

ì‚¬ìš©ì ì •ë³´(ë ˆë²¨)ë¥¼ ë³€ê²½í•˜ëŠ” ë¶€ë¶„ì€ UserServiceë³´ë‹¤ Userê°€ ìŠ¤ìŠ¤ë¡œ ë‹¤ë£¨ëŠ”ê²Œ ì ì ˆí•˜ë‹¤.

```java
    public void upgradeLevel() {
        Level nextLevel = this.level.nextLevel();
        if (nextLevel == null) {
            throw new IllegalStateException(this.level + "ì€  ì—…ê·¸ë ˆì´ë“œê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤");
        }
        else {
            this.level = nextLevel;
        }
    }
```

ê°œì„ ì„ ì§„í–‰í•˜ë©´ì„œ, ê° ì˜¤ë¸Œì íŠ¸ì™€ ë©”ì†Œë“œê°€ ê°ê° ìê¸° ëª«ì˜ ì±…ì„ì„ ë§¡ì•„ ì¼ì„ í•˜ëŠ” êµ¬ì¡°ë¡œ ë§Œë“¤ì–´ì¡Œë‹¤.

---

# íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ ì¶”ìƒí™”

---

ë§Œì•½ ë ˆë²¨ ê´€ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë„ì¤‘ ë„¤íŠ¸ì›Œí¬ê°€ ëŠê¸°ê±°ë‚˜ ì„œë²„ì— ì¥ì• ê°€ ìƒê²¨ì„œ ì‘ì—…ì„ ì™„ë£Œí•  ìˆ˜ ì—†ë‹¤ë©´, ì–´ë–»ê²Œ ë ê¹Œ?

ì§€ê¸ˆ ìƒí™©ì—ì„œëŠ” ë³€ê²½ëœ ì‚¬ëŒê³¼ ë³€ê²½ë˜ì§€ ì•Šì€ ì‚¬ëŒì´ ì¡´ì¬í•˜ë©° ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ ê·¸ëŒ€ë¡œ ìœ ì§€ëœë‹¤.

ì´ìœ ëŠ” ë°”ë¡œ `íŠ¸ëœì­ì…˜` ë¬¸ì œë‹¤.

ëª¨ë“  ì‚¬ìš©ìì˜ ë ˆë²¨ì„ ì—…ê·¸ë ˆì´ë“œ í•˜ëŠ” ì‘ì—…ì´ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ë™ì‘í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí–ˆë‹¤.

íŠ¸ëœì­ì…˜ì€ ACIDë¥¼ ì„±ì§ˆì„ ë§Œì¡±í•´ì•¼ í•˜ëŠ”ë° ì—¬ê¸°ì„œëŠ” A(Atomicity, ì›ìì„±)ì„ ì§€í‚¤ì§€ ëª»í–ˆë‹¤.

**ì›ìì„±** : ë ˆë²¨ ì—…ê·¸ë ˆì´ë“œ ì‘ì—…ì€ ì „ì²´ê°€ ë‹¤ ì„±ê³µí•˜ê±°ë‚˜ ì „ì²´ê°€ ë‹¤ ì‹¤íŒ¨í•´ì•¼í•œë‹¤. (ë¶€ë¶„ ì„±ê³µ, ë¶€ë¶„ ì‹¤íŒ¨ X)

## íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì •

DBëŠ” í•˜ë‚˜ì˜ SQL ëª…ë ¹ì„ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°, ì™„ë²½í•œ íŠ¸ëœì­ì…˜ì„ ì§€ì›í•œë‹¤.

ë‹¤ë§Œ, ì—¬ëŸ¬ ê°œì˜ SQLì´ ì‚¬ìš©ë˜ëŠ” ì‘ì—…ì„ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì·¨ê¸‰í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.

ë§Œì•½ ë‘ ê°œì˜ SQLì´ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ìˆ˜í–‰ëœë‹¤ë©´,

- ë‘ ê°œì˜ SQLì´ ëª¨ë‘ ì„±ê³µì‹œ : **íŠ¸ëœì­ì…˜ ì»¤ë°‹**(í™•ì • ì‘ì—…)
- ë¬¸ì œê°€ ë°œìƒ : **íŠ¸ëœì­ì…˜ ë¡¤ë°±** (ë¬´íš¨í™” ì‘ì—…)

### JDBC íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì •

ëª¨ë“  íŠ¸ëœì­ì…˜ì€ ì‹œì‘í•˜ëŠ” ì§€ì ê³¼ ëë‚˜ëŠ” ì§€ì ì´ ìˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ë˜ê³  ëë‚˜ëŠ” ìœ„ì¹˜ë¥¼ **íŠ¸ëœì­ì…˜ì˜ ê²½ê³„**ë¼ê³  í•œë‹¤.

JDBCì˜ íŠ¸ëœì­ì…˜ì€ í•˜ë‚˜ì˜ Connectionì„ ê°€ì ¸ì™€ ì‚¬ìš©(`getConnection()`)í•˜ê³  ë‹«ëŠ”(`close()`) ì‚¬ì´ì—ì„œ ì¼ì–´ë‚œë‹¤.

JDBCì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´ ìë™ì»¤ë°‹ ì˜µì…˜ì„ falseë¡œ ë§Œë“¤ë©´ ëœë‹¤. (Connection c.`setAutoCommit(false)`)

(JDBC ê¸°ë³¸ ì„¤ì •ì€ AutoCommit)

â†’ `setAutoCommit(false)` ë¡œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³ , `commit()` ë˜ëŠ” `rollback()`ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ **íŠ¸ëœì­ì…˜ì˜ ê²½ê³„ì„¤ì •**ì´ë¼ í•œë‹¤.

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‚´ì˜ íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì •

UserServiceì™€ UserDaoì˜ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë ¤ë©´ ê²°êµ­ íŠ¸ëœì­ì…˜ì˜ ê²½ê³„ ì„¤ì • ì‘ì—…ì„ UserService ìª½ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•œë‹¤.

upgradeLevels() ë©”ì†Œë“œì˜ ì‹œì‘ê³¼ í•¨ê»˜ íŠ¸ëœì­ì…˜ì´ ì‹œì‘í•˜ê³  ë¹ ì ¸ë‚˜ì˜¬ ë•Œ íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë¼ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

### íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì • - Connection ê³µìœ 

íŠ¸ëœì­ì…˜ì€ Connection ì˜¤ë¸Œì íŠ¸ ì•ˆì—ì„œ ë§Œë“¤ì–´ì§„ë‹¤.

`updateLevels()`ì—ì„œ Connection ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³ , UserDaoì—ì„œ DB ì ‘ê·¼ì‹œ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ ë™ì¼í•œ Connection ì˜¤ë¸Œì íŠ¸ë¥¼ ì´ìš©í•˜ë©´ `updateLevels()`ì—ì„œ ì‹œì‘í•œ íŠ¸ëœì­ì…˜ì— UserDaoì˜ ë©”ì†Œë“œë“¤ë„ ì°¸ì—¬í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

```java
public interface UserDao {
		public void add(Connection c, User user);
		...
}
```

> **Connection ê³µìœ ë¡œ íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì • ì‹œ ë¬¸ì œì **
>
1. JdbcTemplateì„ ë” ì´ìƒ í™œìš©í•  ìˆ˜ ì—†ë‹¤.

â†’ JDBC APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸° ë°©ì‹ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.

1. DAOì˜ ë©”ì†Œë“œì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ê³  ìˆëŠ” UserServiceì˜ ë©”ì†Œë“œì— Connection íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ë¼ì•¼ í•œë‹¤.

â†’ íŠ¸ëœì­ì…˜ì— ì°¸ì—¬í•˜ëŠ” ë©”ì†Œë“œëŠ” Connection íŒŒë¼ë¯¸í„°ë¡œ ì§€ì €ë¶„í•´ì§„ë‹¤.

1. Connection íŒŒë¼ë¯¸í„°ê°€ UserDao ì¸í„°í˜ì´ìŠ¤ì— ì¶”ê°€ë˜ë©´ UserDaoëŠ” ë” ì´ìƒ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê¸°ìˆ ì— ë…ë¦½ì ì¼ ìˆ˜ ì—†ë‹¤.

â†’ JPA, í•˜ì´ë²„ë„¤ì´íŠ¸ì˜ ê²½ìš° EntityManagerë‚˜ Session ì˜¤ë¸Œì íŠ¸ë¥¼ ì „ë‹¬ë°›ë„ë¡ í•´ì•¼ í•œë‹¤.

1. í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ì§ì ‘ Connection ì˜¤ë¸Œì íŠ¸ë¥¼ ì¼ì¼ì´ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

## íŠ¸ëœì­ì…˜ ë™ê¸°í™”

### Connection íŒŒë¼ë¯¸í„° ì œê±°

Connectionì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì„ í”¼í•˜ê³  ì‹¶ë‹¤ë©´, ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” **íŠ¸ëœì­ì…˜ ë™ê¸°í™”** ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

> **íŠ¸ëœì­ì…˜ ë™ê¸°í™”**
>

íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê¸° ìœ„í•´ ë§Œë“  Connection ì˜¤ë¸Œì íŠ¸ë¥¼ íŠ¹ë³„í•œ ì €ì¥ì†Œì— ë³´ê´€í•˜ê³ , ì´í›„ì— í˜¸ì¶œë˜ëŠ” DAOì˜ ë©”ì†Œë“œì—ëŠ” ì €ì¥ëœ Connectionì„ ê°€ì ¸ë‹¤ê°€ ì‚¬ìš©í•˜ê²Œ í•˜ëŠ” ë°©ì‹ì´ë‹¤.

â†’ DAOê°€ ì‚¬ìš©í•˜ëŠ” JdbcTemplateì´ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ë°©ì‹ì„ ì´ìš©í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.

![íŠ¸ëœì­ì…˜ ë™ê¸°í™” ê³¼ì •](https://github.com/user-attachments/assets/e4b766f3-254a-4fdb-a069-7665a78531e0)

`íŠ¸ëœì­ì…˜ ë™ê¸°í™” ê³¼ì •`

> ğŸ’¡
>
> (1) UserServiceëŠ” Connection ìƒì„±í•œë‹¤.
>
> (2) Connectionì„ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì €ì¥ì†Œì— ì €ì¥í•˜ê³  `setAutoCommit(false)`ë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•œë‹¤.
>
> (3) ì²« ë²ˆì§¸ë¡œ UserDaoì˜ `update()` ë©”ì†Œë“œ í˜¸ì¶œí•œë‹¤.
>
> (4) JdbcTemplate ë©”ì†Œë“œì—ì„œ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì €ì¥ì†Œì— í˜„ì¬ ì‹œì‘ëœ íŠ¸ëœì­ì…˜ì„ ê°€ì§„ Connectionì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ê°€ì ¸ì˜¨ë‹¤.
>
> (5) Connectionì„ ì´ìš©í•´ PreparedStatementë¥¼ ë§Œë“¤ì–´  UPDATE SQLì„ ì‹¤í–‰í•œë‹¤. (ì»¤ë„¥ì…˜ ë‹«ì§€ ì•ŠìŒ)
>
> (6) ë‘ ë²ˆì§¸ `update()` ë©”ì†Œë“œ í˜¸ì¶œí•œë‹¤.
>
> (7) íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì €ì¥ì†Œì—ì„œ Connectionì„ ê°€ì ¸ì˜¨ë‹¤.
>
> (8) UPDATE SQLì„ ì‹¤í–‰í•œë‹¤.
>
> (9), (10), (11) ì²« ë²ˆì§¸, ë‘ ë²ˆì§¸ ê³¼ì • ë°˜ë³µí•œë‹¤.
>
> (12) íŠ¸ëœì­ì…˜ ë‚´ì˜ ëª¨ë“  ì‘ì—…ì´ ì •ìƒì ìœ¼ë¡œ ëë‚¬ì„ ë•Œ, Connectionì˜ `commit()`ì„ í˜¸ì¶œí•˜ì—¬ íŠ¸ëœì­ì…˜ì„ ì™„ë£Œí•œë‹¤.
>
> (13) íŠ¸ëœì­ì…˜ ì €ì¥ì†Œì—ì„œ ë” ì´ìƒ Connection ê°ì²´ë¥¼ ì €ì¥í•˜ì§€ ì•Šë„ë¡ ì œê±°í•œë‹¤.


### íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì ìš©

ìŠ¤í”„ë§ì€ JdbcTemplateê³¼ ë”ë¶ˆì–´ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ìœ í‹¸ë¦¬í‹° ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.

```java
    public void upgradeLevels() throws Exception {
        TransactionSynchronizationManager.initSynchronization(); // ë™ê¸°í™” ì‘ì—… ì´ˆê¸°í™”
        Connection connection = DataSourceUtils.getConnection(dataSource);
        connection.setAutoCommit(false);
        try {
            List<User> users = userDao.getAll();
            for (User user : users) {
                if (canUpgradeLevel(user)) {
                    upgradeLevel(user);
                }
            }
            connection.commit();
        } catch (Exception e) {
            connection.rollback();
            throw e;
        } finally {
            DataSourceUtils.releaseConnection(connection, dataSource); // DB ì»¤ë„¥ì…˜ close
            // ë™ê¸°í™” ì‘ì—… ì¢…ë£Œ ë° ì •ë¦¬
            TransactionSynchronizationManager.unbindResource(this.dataSource);
            TransactionSynchronizationManager.clearSynchronization();
        }
    }
```

- íŠ¸ëœì­ì…˜ ë™ê¸°í™” ê´€ë¦¬ëŠ” `TransactionSynchronizationManager`ë¥¼ ì‚¬ìš©í•œë‹¤.
- Connectionì„ `DataSourceUtils.getConnection(dataSource)`ë¥¼ í†µí•´ ê°€ì ¸ì˜¤ëŠ” ì´ìœ ëŠ” Connection ì˜¤ë¸Œì íŠ¸ ìƒì„± ë° íŠ¸ëœì­ì…˜ ë™ê¸°í™”ì— ì‚¬ìš©í•˜ë„ë¡ ì €ì¥ì†Œì— ë°”ì¸ë”©í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

### JdbcTemplateê³¼ íŠ¸ëœì­ì…˜ ë™ê¸°í™”

JdbcTemplateëŠ” JDBC ì‘ì—…ì˜ í…œí”Œë¦¿ ë©”ì†Œë“œ(`update()`, `query()`)ë¥¼ í˜¸ì¶œí•˜ë©´ Connectionì„ ìƒì„±í•˜ê³  ì¢…ë£Œí•˜ëŠ” ì¼ì„ ëª¨ë‘ ë‹´ë‹¹í•œë‹¤.

ë§Œì•½ íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì €ì¥ì†Œì— ë“±ë¡ëœ DB ì»¤ë„¥ì…˜ì´ë‚˜ íŠ¸ëœì­ì…˜ì´ ì—†ìœ¼ë©´,

â†’ JdbcTemplateì´ ì§ì ‘ DB ì»¤ë„¥ì…˜ì„ ë§Œë“¤ê³  íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•´ì„œ JDBC ì‘ì—…ì„ ì§„í–‰í•œë‹¤.

â†”

`upgradeLevels()`ì²˜ëŸ¼ íŠ¸ëœì­ì…˜ ë™ê¸°í™”ë¥¼ ì‹œì‘í•œ í›„ë¼ë©´,

â†’ ì§ì ‘ DB ì»¤ë„¥ì…˜ì„ ë§Œë“œëŠ” ëŒ€ì‹  íŠ¸ëœì­ì…˜ ë™ê¸°í™” ì €ì¥ì†Œì— ë“¤ì–´ ìˆëŠ” DB ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•œë‹¤. (ì´ë¯¸ ì‹œì‘ëœ íŠ¸ëœì­ì…˜ì— ì°¸ì—¬)

> ğŸ’¡
>
> **ê²°ë¡ **
>
> - íŠ¸ëœì­ì…˜ì´ í•„ìš” ì—†ë‹¤ë©´, ë°”ë¡œ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•œë‹¤.
> - íŠ¸ëœì­ì…˜ì„ ë§Œë“¤ê³  ê´€ë¦¬í•´ì•¼ í•œë‹¤ë©´, ë¯¸ë¦¬ DB ì»¤ë„¥ì…˜ì„ ìƒì„±í•œ ë‹¤ìŒ íŠ¸ëœì­ì…˜ ë™ê¸°í™”ë¥¼ í•´ì£¼ê³  ì‚¬ìš©í•œë‹¤.

## íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ ì¶”ìƒí™”

ë§Œì•½ì— í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ì—¬ëŸ¬ ê°œì˜ DBì— ë°ì´í„°ë¥¼ ë„£ì–´ì•¼ í•œë‹¤ë©´, Connectionì„ í†µí•´ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œ? ê²°ë¡ ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

`ë¡œì»¬ íŠ¸ëœì­ì…˜`(Connectionì„ ì´ìš©í•œ íŠ¸ëœì­ì…˜ ë°©ì‹)ì€ DB Connectionì— ì¢…ì†ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

â†’ DBì™€ ë…ë¦½ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” Connectionì´ ì•„ë‹Œ, ë³„ë„ì˜ íŠ¸ëœì­ì…˜ ê´€ë¦¬ìë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” **ê¸€ë¡œë²Œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•´ì•¼ í•œë‹¤.**

ì—¬ëŸ¬ ê°œì˜ DBì— ë„£ëŠ” ê²½ìš°ëŠ” ê¸€ë¡œë²Œ íŠ¸ëœì­ì…˜ì„ ì ìš©í•˜ë©´ í•´ê²° ê°€ëŠ¥í•˜ì§€ë§Œ, ë§Œì•½ ë°ì´í„° ì ‘ê·¼ ê¸°ìˆ ì´ í•˜ì´ë²„ë„¤ì´íŠ¸ë‚˜ JPAë¡œ ë³€ê²½ë˜ë©´ ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í• ê¹Œ?

### íŠ¸ëœì­ì…˜ APIì˜ ì˜ì¡´ê´€ê³„ ë¬¸ì œì™€ í•´ê²°ì±…

![íŠ¸ëœì­ì…˜ APIì˜ ì˜ì¡´ê´€ê³„ ë¬¸ì œì™€ í•´ê²°ì±…](https://github.com/user-attachments/assets/711a0a7e-5f38-41b3-9fe3-90323f4309bc)

ì›ë˜ UserServiceëŠ” UserDao ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ëŠ” êµ¬ì¡°ì˜€ë‹¤. ë”°ë¼ì„œ í•˜ìœ„ êµ¬í˜„ì²´ì˜ ì˜í–¥ì„ ë°›ì§€ ì•Šì•˜ë‹¤.

í•˜ì§€ë§Œ JDBCì— ì¢…ì†ì ì¸ Connectionì„ ì´ìš©í•œ íŠ¸ëœì­ì…˜ ì½”ë“œê°€ UserServiceì— ë“±ì¥í•˜ë©´ì„œ UserServiceëŠ” UserDaoJdbcì— ê°„ì ‘ì ìœ¼ë¡œ ì˜ì¡´í•˜ëŠ” ì½”ë“œê°€ ë˜ì—ˆë‹¤.

íŠ¹ì • íŠ¸ëœì­ì…˜ ë°©ë²•ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ë…ë¦½ì ì¼ ìˆ˜ ìˆê²Œ ë§Œë“¤ë ¤ë©´ ì–´ë–»ê²Œ í•˜ë©´ ë ê¹Œ?

â†’ íŠ¹ì • ê¸°ìˆ ì— ì˜ì¡´ì ì¸ Connection, UserTransaction, Session/Transaction API ë“±ì— ì¢…ì†ë˜ì§€ ì•Šê²Œ í•˜ì!

### ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ ì¶”ìƒí™”

ìŠ¤í”„ë§ì€ íŠ¸ëœì­ì…˜ ê¸°ìˆ ì˜ ê³µí†µì ì„ ë‹´ì€ íŠ¸ëœì­ì…˜ ì¶”ìƒí™” ê¸°ìˆ ì„ ì œê³µí•œë‹¤.

![íŠ¸ëœì­ì…˜ ì¶”ìƒí™” ê¸°ìˆ ](https://github.com/user-attachments/assets/6ec66848-1cef-442a-b32e-ddcf16c6db2d)

```java
	  // JDBC íŠ¸ëœì­ì…˜ ì¶”ìƒ ì˜¤ë¸Œì íŠ¸ ìƒì„± (DI)
    public void setTransactionManager(PlatformTransactionManager transactionManager) {
        this.transactionManager = transactionManager;
    }

    public void upgradeLevels() {    
        TransactionStatus status =
                this.transactionManager.getTransaction(new DefaultTransactionDefinition());
        try {
            List<User> users = userDao.getAll();
            for (User user : users) {
                if (canUpgradeLevel(user)) {
                    upgradeLevel(user);
                }
            }
            this.transactionManager.commit(status);
        } catch (RuntimeException e) {
            this.transactionManager.rollback(status);
            throw e;
        }
    }
```

ì´ì œ PlatformTransactionManagerë¥¼ DIí•´ì„œ íŠ¸ëœì­ì…˜ ê¸°ìˆ ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.

ë§Œì•½ íŠ¸ëœì­ì…˜ì„ JTAë¥¼ ì´ìš©í•˜ê³  ì‹¶ë‹¤ë©´, transactionManager ë¹ˆì˜ ì„¤ì •ì„ JTATransactionManagerë¡œ ê³ ì³ì£¼ë©´ ëœë‹¤.

---

# ì„œë¹„ìŠ¤ ì¶”ìƒí™”ì™€ ë‹¨ì¼ ì±…ì„ ì›ì¹™

---

ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ ì¶”ìƒí™” ê¸°ë²•ì„ ì´ìš©í•´ ë‹¤ì–‘í•œ íŠ¸ëœì­ì…˜ ê¸°ìˆ ì„ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆë‹¤.

### ìˆ˜ì§, ìˆ˜í‰ ê³„ì¸µêµ¬ì¡°ì™€ ì˜ì¡´ê´€ê³„

ê¸°ìˆ ê³¼ ì„œë¹„ìŠ¤ì— ì¶”ìƒí™” ê¸°ë²•ì„ ì´ìš©í•˜ë©´ íŠ¹ì • ê¸°ìˆ í™˜ê²½ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” í¬í„°ë¸”í•œ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

UserDaoì™€ UserServiceëŠ” ê°ê° ë‹´ë‹¹í•˜ëŠ” ì½”ë“œì˜ ê¸°ëŠ¥ì ì¸ ê´€ì‹¬ì— ë”°ë¼ ë¶„ë¦¬ë˜ê³ , ì„œë¡œ ë¶ˆí•„ìš”í•œ ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©´ì„œ ë…ìì ìœ¼ë¡œ í™•ì¥ì´ ê°€ëŠ¥í•˜ë‹¤. â†’ ê°™ì€ ê³„ì¸µì—ì„œì˜ **ìˆ˜í‰ì ì¸ ë¶„ë¦¬**

íŠ¸ëœì­ì…˜ì˜ ì¶”ìƒí™”ëŠ” ìœ„ì™€ ì¢€ ë‹¤ë¥´ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê·¸ í•˜ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” ë¡œìš°ë ˆë²¨ì˜ íŠ¸ëœì­ì…˜ ê¸°ìˆ ì´ë¼ëŠ” ì•„ì˜ˆ ë‹¤ë¥¸ ê³„ì¸µì˜ íŠ¹ì„±ì„ ê°–ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬í•œë‹¤.

![ê³„ì¸µê³¼ ì±…ì„ì˜ ë¶„ë¦¬](https://github.com/user-attachments/assets/08c39ba5-0fed-4504-bc82-0f5b60abafd6)

- UserDao â†” UserService : ê²°í•©ë„ê°€ ë‚®ë‹¤.
    - ì¸í„°í˜ì´ìŠ¤ì™€ DIë¥¼ í†µí•´ ì—°ê²°ëê¸° ë•Œë¬¸
- UserDaoëŠ” DB ì—°ê²°ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì— ë…ë¦½ì ì´ë‹¤.
    - DataSource ì¸í„°í˜ì´ìŠ¤ì™€ ë¡œìš° ë ˆë²¨ì˜ ê¸°ìˆ ì€ DIë¥¼ í†µí•´ ì¶”ìƒí™”ëœ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸
    - ì¦‰ UserDao â†” DB ì—°ê²° ê¸°ìˆ  : ê²°í•©ë„ê°€ ë‚®ë‹¤.
- UserService â†” PlatformTransactionManager : ê²°í•©ë„ê°€ ë‚®ë‹¤.
    - PlatformTransactionManager ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ì¶”ìƒí™” ê³„ì¸µì„ ì‚¬ì´ì— ë‘ê³  ì‚¬ìš©í•˜ê¸° ë•Œë¬¸

â†’ ë¡œì§ì˜ ì¢…ë¥˜ì— ë”°ë¥¸ ìˆ˜í‰ì ì¸ êµ¬ë¶„ì´ë“ , ë¡œì§ê³¼ ê¸°ìˆ ì´ë¼ëŠ” ìˆ˜ì§ì ì¸ êµ¬ë¶„ì´ë“  ëª¨ë‘ ê²°í•©ë„ê°€ ë‚®ë‹¤.

â†’ ì´ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ”ë° ìŠ¤í”„ë§ì˜ DIë¥¼ ì´ìš©í•´ ê´€ì‹¬, ì±…ì„, ì„±ê²©ì´ ë‹¤ë¥¸ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.

### ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP, Single Responsibility Principle)


: í•˜ë‚˜ì˜ ëª¨ë“ˆì€ í•œ ê°€ì§€ ì±…ì„ì„ ê°€ì ¸ì•¼ í•œë‹¤.

ë§Œì•½ UserServiceì— JDBC Connection ë©”ì†Œë“œë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” íŠ¸ëœì­ì…˜ ì½”ë“œê°€ ë“¤ì–´ìˆë‹¤ë©´..

UserService : ì‚¬ìš©ì ë ˆë²¨ ê´€ë¦¬ì˜ ì±…ì„ + íŠ¸ëœì­ì…˜ ê´€ë¦¬ì˜ ì±…ì„, ì´ ë‘ ê°€ì§€ì˜ ì±…ì„ì„ ê°–ëŠ”ë‹¤.

ì´ë¥¼ íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ì˜ ì¶”ìƒí™” ë°©ì‹ì„ ë„ì…í•˜ê³ , DIë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì œì–´í•˜ë„ë¡ ë§Œë“¦ìœ¼ë¡œì¨, UserServiceëŠ” íŠ¸ëœì­ì…˜ ê´€ë¦¬ì˜ ì±…ì„ì—ì„œ ë²—ì–´ë‚˜ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì¶©ì‹¤í•˜ê²Œ ì§€í‚¤ê³  ìˆë‹¤.

> **ë‹¨ì¼ ì±…ì„ ì›ì¹™ì˜ ì¥ì **
- ë³€ê²½ì´ í•„ìš”í•  ë•Œ ìˆ˜ì • ëŒ€ìƒì´ ëª…í™•í•´ì§„ë‹¤.
    - ë§Œì•½ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì´ ì§€ì¼œì ¸ ìˆì§€ ì•Šë‹¤ë©´(ì„œë¹„ìŠ¤ â†” DAO), DAOë¥¼ ìˆ˜ì •í•  ë•Œ ì˜ì¡´í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ê°™ì´ ìˆ˜ì •í•´ì•¼ í•œë‹¤. â†’ ë§Œì•½ ìˆ˜ë°± ê°œë¼ë©´..? ìˆ˜ë°± ê°œì˜ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ë¥¼ ì „ë¶€ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
