# 1ì¥_ ì˜¤ë¸Œì íŠ¸ì™€ ì˜ì¡´ê´€ê³„

---
[ğŸ“– ë…¸ì…˜ ë§í¬](https://far-chess-c7b.notion.site/1-_-7a35d45cbaeb4272933b12610115806b)

# 1.  ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬, ë¦¬íŒ©í† ë§

---

> ğŸ“Œ
> 
> **ì±…ì„ì´ ë‹¤ë¥¸ ì½”ë“œë¥¼ ë¶„ë¦¬í•´ì„œ ë‘ ê°œì˜ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì!**

## 1.1 ì´ˆë‚œê° DAO

```java
public class UserDao {

    public void add(User user) throws ClassNotFoundException, SQLException {
        Class.forName("com.mysql.jdbc.Driver");
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/springbook", "spring", "book");

        PreparedStatement ps = connection.prepareStatement("insert into users(id, name, password) values(?,?,?)");
        ps.setString(1, user.getId());
        ps.setString(2, user.getName());
        ps.setString(3, user.getPassword());

        ps.executeUpdate();

        ps.close();
        connection.close();
    }

    public User get(String id) throws ClassNotFoundException, SQLException {
        Class.forName("com.mysql.jdbc.Driver");
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/springbook", "spring", "book");

        PreparedStatement ps = connection.prepareStatement("select * from users where id = ?"))
        ps.setString(1, id);

        ResultSet rs = ps.executeQuery();
        rs.next();
        User user = new User();
        user.setId(rs.getString("id"));
        user.setName(rs.getString("name"));
        user.setPassword(rs.getString("password"));

        rs.close();
        ps.close();
        connection.close();
        
        return user;
    }
}
```

---

## 1.2 DAOì˜ ë¶„ë¦¬

ê°ì²´ì§€í–¥ì˜ ì„¸ê³„ì—ì„œëŠ” ëª¨ë“  ê²ƒì´ ë³€í•œë‹¤.

- ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ì™€ ê·¸ì— ë”°ë¥¸ ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ ë° ë°œì „
- ìš´ì˜ë˜ëŠ” í™˜ê²½ì´ ë³€í™”

â†’ ë¯¸ë˜ì˜ ë³€í™”ë¥¼ ëŒ€ë¹„í•˜ì—¬ ê°œë°œì„ í•´ì•¼í•œë‹¤.

ë¯¸ë˜ì˜ ë³€í™”ë¥¼ ëŒ€ì²´í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ `ë³€í™”ì˜ í­ì„ ìµœì†Œí•œìœ¼ë¡œ ì¤„ì´ëŠ” ê²ƒ`ì´ë‹¤.

ex) Aê°œë°œìì—ê²Œ Bë¥¼ ê³ ì³ë‹¬ë¼ê³  í–ˆì„ ë•Œ,

1. Bë¥¼ ê³ ì¹˜ê¸° ìœ„ì— ê´€ë ¨ëœ ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³ , í˜¹ì‹œë‚˜ ë¹ ëœ¨ë ¸ì„ ë•Œë¥¼ ëŒ€ë¹„ì— ë³€ê²½ëœ ëª¨ë“  ê¸°ëŠ¥ì„ ê²€ì¦í•´ì•¼í•´ì„œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ê²½ìš°
2. Bë¥¼ ê³ ì¹˜ê¸° ìœ„í•´ ë‹¨ ëª‡ ì¤„ì˜ ì½”ë“œë§Œ ìˆ˜ì •í•˜ê³ , ê·¸ ë³€ê²½ì´ ë‚˜ë¨¸ì§€ ê¸°ëŠ¥ì—ëŠ” ì „í˜€ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ”ë‹¤ê³  í™•ì‹ 

ì¦‰, 2ë²ˆì˜ ê°œë°œìê°€ ë¯¸ë˜ì˜ ë³€í™”ë¥¼ ë” ì˜ ì¤€ë¹„í•œ ê²ƒì´ë‹¤.

2ë²ˆì˜ ê°œë°œìì²˜ëŸ¼ ë³€ê²½ì´ ì¼ì–´ë‚  ë•Œ <u>ì‘ì—…ì„ ìµœì†Œí™”</u> ë° ë³€ê²½ì´ <u>ì™¸ë¶€ì— ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šê¸°</u> ìœ„í•´, **`ë¶„ë¦¬ì™€ í™•ì¥`** ì„ ê³ ë ¤í•´ì•¼í•œë‹¤.

---

### ë¶„ë¦¬

ëª¨ë“  ë³€ê²½ê³¼ ë°œì „ì€ í•œ ë²ˆì— ì—¬ëŸ¬ ê´€ì‹¬ì‚¬ì— ì§‘ì¤‘í•˜ì§€ ì•Šê³  í•œ ê°€ì§€ì˜ ê´€ì‹¬ì‚¬í•­ì— ì§‘ì¤‘í•´ì„œ ë°œìƒí•œë‹¤.

í•˜ì§€ë§Œ í•œ ê°€ì§€ì˜ ê´€ì‹¬ì— ë”°ë¥¸ ë³€í™”ë¥¼ ì‘ì—…í•˜ê¸° ìœ„í•´ í•œ ê³³ì— ì§‘ì¤‘í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ë‹¤.

ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ë¶„ë¦¬ë¥¼ í†µí•´ `í•œ ê°€ì§€ ê´€ì‹¬ì´ í•œ êµ°ë°ì— ì§‘ì¤‘`ë˜ê²Œ í•´ì•¼í•œë‹¤.

> ê´€ì‹¬ì´ ê°™ì€ ê²ƒë¼ë¦¬ëŠ” í•˜ë‚˜ì˜ ê°ì²´ í˜¹ì€ ì¹œí•œ ê°ì²´ë¡œ ëª¨ì´ê²Œ í•œë‹¤. 
> 
> ê´€ì‹¬ì´ ë‹¤ë¥¸ ê²ƒì€ ê°€ëŠ¥í•œ ë”°ë¡œ ë–¨ì–´ì ¸ì„œ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ë¶„ë¦¬í•œë‹¤.
>

**UserDaoì˜ ê´€ì‹¬ì‚¬í•­**

1. DB ì—°ê²°ê³¼ ê´€ë ¨ëœ ê´€ì‹¬
2. ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•´ DBì— ë³´ë‚¼ SQL ë¬¸ì¥ì„ ë‹´ì„ Statementë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•˜ëŠ” ê´€ì‹¬ (ë¡œì§ì— ëŒ€í•œ ê´€ì‹¬)
3. ì‘ì—…ì´ ëë‚˜ë©´ ì‚¬ìš©í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹«ì•„ì£¼ëŠ” ê´€ì‹¬

ì—¬ê¸°ì„œ ê°€ì¥ ë¬¸ì œê°€ ë˜ëŠ” ê²ƒì€ 1ë²ˆ DB ì—°ê²°ê³¼ ê´€ë ¨ëœ ê´€ì‹¬ì˜ ì½”ë“œë‹¤.

add(), get() ë©”ì†Œë“œì— DB ì—°ê²°ê³¼ ê´€ë ¨ëœ ì½”ë“œê°€ ì¤‘ë³µë˜ê³  ìˆë‹¤. ë¯¸ë˜ì— ë” ë§ì€ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´ì„œ ì—¬ëŸ¬ ë©”ì†Œë“œì—ì„œ ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

**`ì¤‘ë³µ ì½”ë“œ ë¶„ë¦¬`**

```java
public class UserDao {

    public void add(User user) throws ClassNotFoundException, SQLException {
        Connection connection = getConnection();
        ...
    }

    public User get(String id) throws ClassNotFoundException, SQLException {;
        Connection connection = getConnection();
        ...
    }

    private Connection getConnection() throws ClassNotFoundException, SQLException {
        Class.forName("com.mysql.jdbc.Driver");
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/springbook", "spring", "book");
        return connection;
    }
}
```

ì¤‘ë³µ ì½”ë“œë¥¼ ë¶„ë¦¬í•¨ì˜ ì´ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ :

- ì¤‘ë³µì„ ì œê±°í•œë‹¤.
- DB ì—°ê²°ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì— ë³€ê²½ì´ ë°œìƒí•  ê²½ìš°, getConnection()ì˜ ì½”ë“œë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

---

Q1. ë§Œì•½, UserDAOê°€ MySQL ë¿ë§Œ ì•„ë‹ˆë¼ MSSQL, Oracle DB ë“± ì—¬ëŸ¬ DBë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

A. ë‹¤ë¥¸ DBë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê³ ê°ì—ê²Œ UserDaoì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ì œê³µí•˜ê³ , ê³ ê°ì´ getConnection()ì„ ë³€ê²½í•˜ë©´ ëœë‹¤.

Q2. UserDAOì˜ ì†ŒìŠ¤ì½”ë“œì— ë…ìì ì¸ ê°œë°œ ê¸°ìˆ ì´ ë“¤ì–´ê°€ì„œ ì œê³µí•  ìˆ˜ ì—†ìŒ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

A. ì§€ê¸ˆ ì†ŒìŠ¤ì½”ë“œì—ì„œ í•´ê²°í•  ë°©ë²•ì´ ì—†ë‹¤.

ìš°ë¦¬ëŠ” ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë³€í™”ì— ëŒ€ì‘í•˜ëŠ” ìˆ˜ì¤€ì˜ ì½”ë“œê¹Œì§€ ë§Œë“¤ì—ˆë‹¤.

í•˜ì§€ë§Œ 2ë²ˆ ì§ˆë¬¸ì„ í•´ê²°í•˜ê¸° ìœ„í•´ <u>**ë³€í™”ë¥¼ ë°˜ê¸°ëŠ” DAO**</u>ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

**ìƒì†ì„ í†µí•œ í™•ì¥**

UserDao ì½”ë“œë¥¼ í•œ ë‹¨ê³„ ë” ë¶„ë¦¬í•˜ë©´ ëœë‹¤.

ì—¬ëŸ¬ DBë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ì„ , getConnection()ì„ ì¶”ìƒ ë©”ì†Œë“œë¡œ ë§Œë“ ë‹¤.

ì´í›„ ê³ ê°ì´ ì¶”ìƒ í´ë˜ìŠ¤ì¸ UserDaoë¥¼ ìƒì†í•´ì„œ ì„œë¸Œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.

```java
public abstract class UserDao {

    public void add(User user) throws ClassNotFoundException, SQLException {
        Connection connection = getConnection();
        ...
    }

    public User get(String id) throws ClassNotFoundException, SQLException {;
        Connection connection = getConnection();
        ...
    }

    public abstract Connection getConnection() throws ClassNotFoundException, SQLException;
}

// ìƒì†ì„ í†µí•´ í™•ì¥ëœ í•˜ìœ„ ì„œë¸Œ í´ë˜ìŠ¤ì™€ getConnection()
public class MsUserDao extends UserDao {

    @Override
    public Connection getConnection() throws ClassNotFoundException, SQLException {
        // MSSQLì„ ì—°ê²°í•˜ëŠ” ì½”ë“œ
    }
}

public class OracleDao extends UserDao {

    @Override
    public Connection getConnection() throws ClassNotFoundException, SQLException {
        // Oracle DBë¥¼ ì—°ê²°í•˜ëŠ” ì½”ë“œ
    }
}
```

ì•ìœ¼ë¡œ DB ì—°ê²° ê¸°ëŠ¥ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ UserDAOë¥¼ ìƒì†í•˜ì—¬ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ í™•ì¥í•˜ë©´ ëœë‹¤.

ìœ„ ì½”ë“œì—ì„œ í…œí”Œë¦¿ ë©”ì†Œë“œ íŒ¨í„´ê³¼ íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ì´ ì‚¬ìš©ëœë‹¤.

í…œí”Œë¦¿ ë©”ì†Œë“œ íŒ¨í„´

1. ìŠˆí¼í´ë˜ìŠ¤(UserDao)ì— ê¸°ë³¸ì ì¸ ë¡œì§ì˜ íë¦„(ì»¤ë„¥ì…˜ ìƒì„±, SQL ìƒì„±, ì‹¤í–‰, ë°˜í™˜ ë“±)ì„ ë§Œë“¤ê³ ,
2. ê·¸ ê¸°ëŠ¥ì˜ ì¼ë¶€ë¥¼ ì¶”ìƒ ë©”ì†Œë“œë‚˜ ì˜¤ë²„ë¼ì´ë”©ì´ ê°€ëŠ¥í•œ protected ë©”ì†Œë“œ ë“±ìœ¼ë¡œ ë§Œë“  ë’¤,
3. ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ë©”ì†Œë“œë¥¼ í•„ìš”ì— ë§ê²Œ êµ¬í˜„í•˜ëŠ” ë°©ë²•

íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´

getConnection() ë©”ì†Œë“œëŠ” Connection **íƒ€ì… ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±**í•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜í•œ ì¶”ìƒ ë©”ì†Œë“œì´ë‹¤.

ì„œë¸Œ í´ë˜ìŠ¤ì˜ getConnection() ë©”ì†Œë“œëŠ” Connection í´ë˜ìŠ¤ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ì–´ë–»ê²Œ ìƒì„±í• ì§€ ê²°ì •í•œë‹¤.

â†’ ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ êµ¬ì²´ì ì¸ ì˜¤ë¸Œì íŠ¸ ìƒì„± ë°©ë²•ì„ ê²°ì •í•˜ëŠ” ê²ƒ

(Connection ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ getConnection()ì´ Connection ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€, Connection ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ ìŠˆí¼ í´ë˜ìŠ¤ì—ì„œëŠ” ì•Œì§€ ëª»í•œë‹¤.)

UserDaoë¥¼ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ ì¥ì ì´ ìˆì§€ë§Œ ë‹¨ì ë„ ì¡´ì¬í•œë‹¤.

- ìƒì†ì„ ì‚¬ìš©í•¨
    - UserDaoê°€ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ìƒì†ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ë” ì´ìƒ ìƒì†ì„ í•  ìˆ˜ ì—†ë‹¤. (ë‹¤ì¤‘ìƒì† X)
- ìƒì†ì„ í†µí•œ ìƒí•˜ìœ„ í´ë˜ìŠ¤ì˜ ê´€ê³„ëŠ” ìƒê°ë³´ë‹¤ ë°€ì ‘í•˜ë‹¤.
    - ìŠˆí¼ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´, ë§Œì•½ ìŠˆí¼ í´ë˜ìŠ¤ì—ì„œ ë³€ê²½ëœ ê¸°ëŠ¥ì´ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë ¤ë©´ ë‹¤ì‹œ ê°œë°œì„ í•´ì•¼í•œë‹¤.

---

## 1.3 DAOì˜ í™•ì¥

ìœ„ì—ì„œ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë¡œì§ ê´€ì‹¬ê³¼ DB ì—°ê²° ê´€ì‹¬ì„ ìƒí•˜ìœ„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì˜€ë‹¤.

í•˜ì§€ë§Œ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë¡œì§ê³¼ DB ì—°ê²°ì€ ê´€ì‹¬ì‚¬ë„ ë‹¤ë¥´ê³  ë³€í™”ì˜ ì„±ê²©ì´ ë‹¤ë¥´ë‹¤.

### í´ë˜ìŠ¤ì˜ ë¶„ë¦¬

ì´ë²ˆì—ëŠ” ê´€ì‹¬ì‚¬ê°€ ë‹¤ë¥´ê³  ë³€í™”ì˜ ì„±ê²©ì´ ë‹¤ë¥¸ ì½”ë“œë¥¼ í´ë˜ìŠ¤ ë¶„ë¦¬ë¥¼ í†µí•´ ë¶„ë¦¬í•´ë³´ì.

ê´€ì‹¬ì‚¬ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë‘ ê´€ì‹¬ì‚¬ë¥¼ ë…ë¦½ì‹œí‚¤ê³  í™•ì¥ ê°€ëŠ¥í•œ ë°©ë²•ì€ `ë…ë¦½ì ì¸ í´ë˜ìŠ¤`ë¡œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

```java
public class UserDao {
    private SimpleConnectionMaker simpleConnectionMaker;

    // ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•œ ë²ˆë§Œ ë§Œë“¤ì–´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ë©”ì†Œë“œì—ì„œ ì‚¬ìš©í•œë‹¤.
    public UserDao() {
        this.simpleConnectionMaker = new SimpleConnectionMaker();
    }

    public void add(User user) throws ClassNotFoundException, SQLException {
        Connection connection = simpleConnectionMaker.makeNewConnection();
        ...
    }

    public User get(String id) throws ClassNotFoundException, SQLException {;
        Connection connection = simpleConnectionMaker.makeNewConnection();
        ...
    }
}

public class SimpleConnectionMaker {
    public Connection makeNewConnection() throws ClassNotFoundException, SQLException {
        Class.forName("com.mysql.jdbc.Driver");
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/springbook", "spring", "book");
        return connection;
    }
}
```

ê¸°ì¡´ ì½”ë“œì—ì„œ ê´€ì‹¬ì‚¬ì— ë”°ë¥¸ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ìƒì†ì— ë‹¨ì ì„ ì œê±°í–ˆë‹¤.

í•˜ì§€ë§Œ ìƒì†ì˜ í™•ì¥ì—ì„œ ì˜¤ëŠ” ì´ì (ë‹¤ì–‘í•œ DB ì‚¬ìš©)ì€ ë¶ˆê°€ëŠ¥í•´ì¡Œë‹¤.

í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•œ ê²½ìš°ì— ììœ ë¡œìš´ í™•ì¥ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ ë‘ ê°€ì§€ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤.

1. ê³ ê° ë³„ë¡œ SimpleConnectionMakerì˜ ë©”ì†Œë“œ ì´ë¦„ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.
   ë©”ì†Œë“œ ì´ë¦„ì´ ë‹¤ë¥¼ ê²½ìš°, UserDaoì˜ add(), get()ì˜ DB ì—°ê²° ë©”ì†Œë“œëª…ì„ ì¼ì¼ì´ ë°”ê¿”ì¤˜ì•¼ í•œë‹¤.
2. DB ì»¤ë„¥ì…˜ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ê°€ ì–´ë–¤ ê²ƒì¸ì§€ UserDaoê°€ êµ¬ì²´ì ìœ¼ë¡œ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤.
   ë§Œì•½ ê³ ê°ì‚¬ì—ì„œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œ DB ì»¤ë„¥ì…˜ì„ êµ¬í˜„í•˜ë©´ UserDaoë¥¼ ë‹¤ì‹œ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

**ì¸í„°í˜ì´ìŠ¤ì˜ ë„ì…**

ë‘ ê°œì˜ í´ë˜ìŠ¤ ê°„ì˜ ì¶”ìƒì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨, ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì ‘ê·¼í•˜ë©´ ì‹¤ì œ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë°”ê¿”ë„ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ëœë‹¤.

```java
public interface ConnectionMaker {
    Connection makeConnection() throws ClassNotFoundException, SQLException;
}

// ConnectionMaker -> MsConnection
public class MsConnectionMaker implements ConnectionMaker {
    ...
    @Override
    public Connection makeConnection() throws ClassNotFoundException, SQLException {
        ...
    }
}
```

```java
public class UserDao {

    // UserDao -> ConnectionMaker
    private ConnectionMaker connectionMaker;

    public UserDao() {
        // ConnectionMaker -> MsConnection
        this.connectionMaker = new MsConnectionMaker();
    }

    public void add(User user) throws ClassNotFoundException, SQLException {
        Connection connection = connectionMaker.makeConnection();
        ...
    }

    public User get(String id) throws ClassNotFoundException, SQLException {;
        Connection connection = connectionMaker.makeConnection();
        ...
    }
}
```

ì´ì œëŠ” ê³ ê° ë³„ë¡œ ConnectionMaker ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨ í™•ì¥ì˜ ì´ì ê¹Œì§€ ì–»ì„ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ UserDao ìƒì„±ìì—ì„œ MsConnectionMaker í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì„œ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ìˆë‹¤.

ê²°êµ­, UserDaoë¥¼ ê³ ê°ë§ˆë‹¤ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ë¬¸ì œê°€ ë˜ ë‹¤ì‹œ ë°œìƒí•œë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œëŠ” UserDaoê°€ ì–´ë–¤ ConnectionMaker êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í• ì§€ ê²°ì •í•˜ëŠ” ê´€ì‹¬ì—ì„œ ë°œìƒí•œë‹¤.

ì´ ê´€ì‹¬ì„ ë¶„ë¦¬í•´ì•¼ ë…ë¦½ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•œ í´ë˜ìŠ¤ê°€ ë  ìˆ˜ ìˆë‹¤.

ê´€ì‹¬ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ UserDaoë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œë‹¤.

UserDao í´ë¼ì´ì–¸íŠ¸ì—ì„œ UserDaoê°€ ConnectionMakerì˜ êµ¬í˜„ì²´ ì¤‘ ì–´ë–¤ ê±¸ ì‚¬ìš©í• ì§€ ê²°ì •í•˜ë©´ ëœë‹¤.

UserDao ë‚´ë¶€ì˜ ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ë‚˜ ìƒì„±ì íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì „ë‹¬í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```java
// UserDao
public UserDao(ConnectionMaker connectionMaker) {
        this.connectionMaker = connectionMaker;
}

public class UserDaoTest {
    public static void main(String[] args) {
        // í´ë¼ì´ì–¸íŠ¸(ì—¬ê¸°ì„œëŠ” main()) ì—ì„œ ConnectionMakerì˜ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³ 
        // ë„˜ê²¨ì£¼ë©´ì„œ UserDaoì—ì„œì˜ ê´€ì‹¬ì„ ë¶„ë¦¬í•œë‹¤. (UserDaoì˜ ì±…ì„ì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë– ë„˜ê¸´ë‹¤.)
        ConnectionMaker connectionMaker = new MsConnectionMaker();
        UserDao userDao = new UserDao(connectionMaker);
    }
}
```

# 2. ì „ëµ íŒ¨í„´

---

> ğŸ“Œ
>
> ë°”ë€” ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤(B)ëŠ” ì¸í„°í˜ì´ìŠ¤ (A) ë¥¼ êµ¬í˜„í•˜ë„ë¡ ë§Œë“¤ì!
>
> ë‹¤ë¥¸ í´ë˜ìŠ¤(C)ì—ì„œëŠ” Bê°€ ì•„ë‹Œ A ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ì„œ ì ‘ê·¼í•˜ê²Œ ë§Œë“¤ì!
>
> ë§Œì•½ í´ë˜ìŠ¤ Bì˜ êµ¬í˜„ ë°©ë²•ì´ ë³€ê²½ë  ê²½ìš°:
> - CëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ” Aë¥¼ í†µí•´ Bë¥¼ ì ‘ê·¼í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
> - ë”°ë¼ì„œ ë³€ê²½ ì‚¬í•­ì´ ë°œìƒí•˜ë©´ Bì˜ êµ¬í˜„ ì½”ë“œë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.


ê°œì„ í•œ UserDaoTest-UserDao-ConnectionMaker êµ¬ì¡°ëŠ” **ì „ëµ íŒ¨í„´**ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

> ì „ëµ íŒ¨í„´ (Strategy Pattern)
>

ìì‹ ì˜ ê¸°ëŠ¥ ë§¥ë½(Context)ì—ì„œ, í•„ìš”ì— ë”°ë¼ ë³€ê²½ì´ í•„ìš”í•œ ì•Œê³ ë¦¬ì¦˜ì„ `ì¸í„°í˜ì´ìŠ¤`ë¥¼ í†µí•´ í†µì§¸ë¡œ `ì™¸ë¶€ë¡œ ë¶„ë¦¬ì‹œí‚¤ê³ `, ì´ë¥¼ êµ¬í˜„í•œ êµ¬ì²´ì ì¸ ì•Œê³ ë¦¬ì¦˜ í´ë˜ìŠ¤ë¥¼ í•„ìš”ì— ë”°ë¼ ë°”ê¿”ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë””ìì¸ íŒ¨í„´.

* ì•Œê³ ë¦¬ì¦˜ : ë…ë¦½ì ì¸ ì±…ì„ìœ¼ë¡œ ë¶„ë¦¬ê°€ ê°€ëŠ¥í•œ ê¸°ëŠ¥

**UserDaoì™€ ì „ëµíŒ¨í„´**

UserDaoëŠ” ì „ëµ íŒ¨í„´ì˜ ì»¨í…ìŠ¤íŠ¸ì— í•´ë‹¹í•œë‹¤.

UserDao(ì»¨í…ìŠ¤íŠ¸)ëŠ” ìì‹ ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” í•„ìš”í•œ ê¸°ëŠ¥ ì¤‘ì—ì„œ `ë³€ê²½ ê°€ëŠ¥í•œ` , DB ì—°ê²° ë°©ì‹(ì•Œê³ ë¦¬ì¦˜)ì„ ConnectionMaker(ì¸í„°í˜ì´ìŠ¤)ë¡œ ì •ì˜í•˜ê³ , ì—¬ëŸ¬ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ í†µí•´ ì „ëµì„ ë°”ê¿”ê°€ë©´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¶„ë¦¬í•œ ê³¼ì •ì´ ì „ëµ íŒ¨í„´ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

# 3. ê°œë°© íì‡„ ì›ì¹™ (OCP)

---

> ğŸ“Œ
> 
> ìì‹ ì˜ ì±…ì„ ìì²´ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš° **ì™¸ì—ëŠ” ë¶ˆí•„ìš”í•œ ë³€í™”ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ë§‰ì•„ì£¼ê³ ** (`Close`)
>
> ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” ì™¸ë¶€ ì˜¤ë¸Œì íŠ¸ì˜ ê¸°ëŠ¥ì€ **ììœ ë¡­ê²Œ í™•ì¥í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì!** (`Open`)


> ê°œë°© íì‡„ ì›ì¹™
>

í´ë˜ìŠ¤ë‚˜ ëª¨ë“ˆì€ í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆì–´ì•¼ í•˜ê³  ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.

UserDaoì˜ ê²½ìš°:

- ê°œë°©
    - â€œDB ì—°ê²° ë°©ë²•â€ ê¸°ëŠ¥ í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆë‹¤.
    - ì¦‰, UserDaoì— ì „í˜€ ì˜í–¥ì„ ì£¼ì§€ ì•Šê³ ë„ ì–¼ë§ˆë“ ì§€ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- íì‡„
    - UserDaoì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ì½”ë“œëŠ” ê¸°ëŠ¥ í™•ì¥ ì‹œ ë³€í™”ì— ì˜í–¥ì„ ë°›ì§€ ì•Šê³  ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

# 4. ë†’ì€ ì‘ì§‘ë„ì™€ ë‚®ì€ ê²°í•©ë„

---

> ğŸ“Œ
> 
> í•œìª½ì˜ ê¸°ëŠ¥ ë³€í™”ê°€ **ë‹¤ë¥¸ ìª½ì˜ ë³€ê²½ì„ ìš”êµ¬í•˜ì§€ ì•Šì•„ë„** ë˜ê²Œ í•˜ì! (`ë‚®ì€ ê²°í•©ë„`)
>
> **ìì‹ ì˜ ì±…ì„ê³¼ ê´€ì‹¬ì‚¬ì—ë§Œ ìˆœìˆ˜í•˜ê²Œ ì§‘ì¤‘**í•˜ì! (`ë†’ì€ ì‘ì§‘ë„`)

ê°œë°œ íì‡„ ì›ì¹™ì€ `ë†’ì€ ì‘ì§‘ë„ì™€ ë‚®ì€ ê²°í•©ë„` ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.

**ì‘ì§‘ë„**

- â€œë³€í™”ê°€ ì¼ì–´ë‚  ë•Œ í•´ë‹¹ ëª¨ë“ˆì—ì„œ ë³€í•˜ëŠ” ë¶€ë¶„â€
- ì¦‰ ë³€ê²½ì´ ì¼ì–´ë‚  ë•Œ ëª¨ë“ˆì˜ ë§ì€ ë¶€ë¶„ì´ í•¨ê»˜ ë°”ë€ë‹¤ë©´ ì‘ì§‘ë„ê°€ ë†’ë‹¤ê³  ë§í•  ìˆ˜ ìˆë‹¤.
    - 1.1 ì´ˆë‚œê° DAO ì½”ë“œì—ì„œ DB ì»¤ë„¥ì…˜ì„ ë§Œë“œëŠ” ê¸°ëŠ¥ì„ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë³€ê²½í•œë‹¤ê³  í•  ë•Œ,
      ì´ˆë‚œê° DAO ì½”ë“œëŠ” ì—¬ëŸ¬ ê´€ì‹¬ì‚¬ì™€ ì±…ì„ì´ ì–½í˜€ ìˆê¸° ë•Œë¬¸ì— ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ì„ ì°¾ëŠ” ê²ƒë„ ë²ˆê±°ë¡­ê³ , ë‹¤ë¥¸ ê¸°ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ê²½ìš°ë„ í™•ì¸í•´ì•¼ í•œë‹¤. â†’ ì‘ì§‘ë„ê°€ ë‚®ë‹¤.
    - UserDao í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì´ DAO ì•ˆì— ìœ„ì¹˜í•˜ë©° (ìì‹ ì˜ ì±…ì„)
      ConnectionMaker ë˜í•œ ìì‹ ì˜ ê¸°ëŠ¥ì— ì¶©ì‹¤í•˜ë„ë¡ ë…ë¦½ë˜ì–´ ìì‹ ì˜ ì±…ì„ì„ ë‹´ë‹¹í•˜ê¸°ì— ì‘ì§‘ë„ê°€ ë†’ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

**ê²°í•©ë„**

- â€œí•˜ë‚˜ì˜ ì˜¤ë¸Œì íŠ¸ê°€ ë³€ê²½ì´ ì¼ì–´ë‚  ë•Œì— ê´€ê³„ë¥¼ ë§ºê³  ìˆëŠ” ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ì—ê²Œ ë³€í™”ë¥¼ ìš”êµ¬í•˜ëŠ” ì •ë„â€
- ë‚®ì€ ê²°í•©ë„
    - í•˜ë‚˜ì˜ ë³€ê²½ì´ ë°œìƒí•  ë•Œ ëª¨ë“ˆê³¼ ê°ì²´ë¡œ ë³€ê²½ì— ëŒ€í•œ ìš”êµ¬ê°€ ì „íŒŒë˜ì§€ ì•ŠëŠ” ìƒíƒœ
    - ex) ConnectionMakerì™€ UserDaoëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©°, ConnectionMakerì˜ êµ¬í˜„ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë”ë¼ë„ UserDaoì˜ ì½”ë“œëŠ” ë³€ê²½ë  í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ê²°í•©ë„ê°€ ë‚®ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

# 5. ì œì–´ì˜ ì—­ì „ (Inversion of Control, IoC)

---

> ğŸ“Œ
>
> ì˜¤ë¸Œì íŠ¸ì˜ ìƒì„±ê³¼ ì—¬íƒ€ ì˜¤ë¸Œì íŠ¸ì™€ ê´€ê³„ë¥¼ ë§ºëŠ” `ì‘ì—…ì˜ ì œì–´ê¶Œ`ì„ **ë³„ë„ì˜ ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬**ë¥¼ ë§Œë“¤ì–´ ë„˜ê¸´ë‹¤.
>
> ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ì˜ ê¸°ëŠ¥ì„ ì¼ë°˜í™”í•œ `IoC ì»¨í…Œì´ë„ˆ`ë¡œ ë„˜ê²¨ì„œ ì˜¤ë¸Œì íŠ¸ê°€ ìì‹ ì´ ì‚¬ìš©í•  ëŒ€ìƒì˜ **ìƒì„±ì´ë‚˜ ì„ íƒì— ê´€í•œ ì±…ì„ìœ¼ë¡œë¶€í„° `ììœ ë¡­ê²Œ` ë§Œë“¤ì–´ì¤€ë‹¤.**


## 1.4.1 ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬

UserDaoTestëŠ” ì–´ë–¤ ConnectionMaker êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í• ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê¸°ëŠ¥ì„ ë§¡ê³  ìˆë‹¤.

í•˜ì§€ë§Œ UserDaoTestëŠ” UserDaoì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì±…ì„ë§Œ ê°€ì§ˆë¿, êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ê²°ì •í•˜ëŠ” ì±…ì„ê¹Œì§€ ê°–ê³  ìˆëŠ” ë¬¸ì œì ì´ ìˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, UserDaoì™€ ConnectionMaker êµ¬í˜„ í´ë˜ìŠ¤ì˜ `ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒ`ê³¼, ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ë‘ ê°œì˜ ì˜¤ë¸Œì íŠ¸ê°€ ì—°ê²°ë˜ë„ë¡ `ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒ`ì´ë‹¤.

**íŒ©í† ë¦¬**

ê°ì²´ì˜ ìƒì„± ë°©ë²•ì„ ê²°ì •í•˜ê³  ìƒì„±ëœ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ **íŒ©í† ë¦¬**ë¼ê³  í•œë‹¤.

*ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì´ë‚˜ íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ê³¼ëŠ” ë‹¤ë¥´ë‹¤.

**íŒ©í† ë¦¬**ëŠ” `ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±`í•˜ëŠ” ìª½ê³¼ ìƒì„±ëœ `ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©`í•˜ëŠ” ìª½ì˜ ì—­í• ê³¼ ì±…ì„ì„ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

íŒ©í† ë¦¬ ì—­í• ì„ ë§¡ì„ í´ë˜ìŠ¤ë¥¼ DaoFactoryë¼ê³  ìƒì„±í•œë‹¤.

```java
public class DaoFactory {
    public UserDao userDao() {
        // íŒ©í† ë¦¬ì˜ ë©”ì†Œë“œëŠ” UserDao íƒ€ì…ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ê³ , ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ë¥¼ ê²°ì •í•œë‹¤.
        ConnectionMaker connectionMaker = new MsConnectionMaker();
        UserDao userDao = new UserDao(connectionMaker);
        return userDao;
    }
}

public class UserDaoTest {
    public static void main(String[] args) {
        UserDao userDao = new DaoFactory().userDao();
    }
}
```

**ì„¤ê³„ë„ë¡œì„œì˜ íŒ©í† ë¦¬**

- `UserDao` + `ConnectionMaker` : í•µì‹¬ì ì¸ ë°ì´í„° ë¡œì§ + ê¸°ìˆ  ë¡œì§
- `DaoFactory` : ì˜¤ë¸Œì íŠ¸ë“¤ì„ êµ¬ì„±í•˜ê³  ê´€ê³„ë¥¼ ì •ì˜í•˜ëŠ” ì±…ì„

ì „ìëŠ” ì‹¤ì§ˆì ì¸ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ê³ , í›„ìëŠ” ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì¡°ì™€ ê´€ê³„ë¥¼ ì •ì˜í•˜ëŠ” ì„¤ê³„ë„ ì—­í• ì´ë‹¤.

![ì„¤ê³„ë„ë¡œì¨ì˜ íŒ©í† ë¦¬](https://github.com/user-attachments/assets/c3005faa-2f61-49db-9eb3-19b53efb692d)

ì¦‰ DaoFactoryë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì»´í¬ë„ŒíŠ¸ ì—­í• ì„ í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ì™€ êµ¬ì¡°ë¥¼ ê²°ì •í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ë¶„ë¦¬í–ˆë‹¤ëŠ”ë° ê°€ì¥ ì˜ë¯¸ê°€ ìˆë‹¤.

## 1.4.3 ì œì–´ê¶Œì˜ ì´ì „ì„ í†µí•œ ì œì–´ê´€ê³„ ì—­ì „

> ì œì–´ì˜ ì—­ì „
>

í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ êµ¬ì¡°ê°€ ë’¤ë°”ë€ŒëŠ” ê²ƒ

**ì¼ë°˜ì ì¸ í”„ë¡œê·¸ë¨ì˜ íë¦„ (ì œì–´ì˜ ì—­ì „ X)**

> 1. `main()` ë©”ì†Œë“œì™€ ê°™ì´ í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ëŠ” ì§€ì ì—ì„œ ë‹¤ìŒì— ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ ê²°ì •
> 2. ê²°ì •í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ë©”ì†Œë“œë¥¼ í˜¸ì¶œ
> 3. í˜¸ì¶œëœ ë©”ì†Œë“œì—ì„œ ì‹¤í–‰ë  ê²ƒì„ ê²°ì •í•˜ê³  í˜¸ì¶œí•˜ëŠ” ì‹ìœ¼ë¡œ ë°˜ë³µí•œë‹¤.
>
> â†’ ì¦‰, ê°œë°œìê°€ í”„ë¡œê·¸ë¨ì˜ íë¦„ì— ì§ì ‘ ê´€ì—¬í•œë‹¤.


**ì œì–´ì˜ ì—­ì „**

> í”íˆ ìš°ë¦¬ê°€ Springì„ ì‚¬ìš©í•´ì„œ ê°œë°œí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆë‹¤.
>
> - `main()` ë©”ì†Œë“œì—ëŠ” `SpringApplication.run()` ë§Œ ì¡´ì¬í•œë‹¤.
> - ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í´ë˜ìŠ¤ë‚˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ì•Œì•„ì„œ ì‹¤í–‰ë˜ëŠ” ê²½ìš°,
> - `JpaRepository`ë¥¼ ìƒì†í•  ë•Œ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ êµ¬í˜„ì²´ê°€ ë§Œë“¤ì–´ì§€ëŠ” ê²½ìš°,
> - ì´ì™¸ ë“±ë“±â€¦
>
> â†’ ì˜¤ë¸Œì íŠ¸ë¥¼ ìŠ¤ìŠ¤ë¡œ ì„ íƒí•˜ê±°ë‚˜, ìƒì„±í•˜ê±°ë‚˜, ì–¸ì œ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ëŠ”  
> ì¦‰, ëª¨ë“  ì œì–´ ê¶Œí•œì„ ìì‹ ì´ ì•„ë‹Œ ì œì–´ ê¶Œí•œì„ ê°–ëŠ” íŠ¹ë³„í•œ ì˜¤ë¸Œì íŠ¸ì— ìœ„ì„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.


DaoFactoryë¥¼ ë„ì…í•˜ëŠ” ê³¼ì •ë„ IoCë¥¼ ì ìš©í•˜ëŠ” ì‘ì—…ì´ë‹¤.

DaoFactoryì—ì„œ UserDaoì™€ ConnectionMakerì˜ êµ¬í˜„ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ë§¡ê³  ìˆê¸° ë•Œë¬¸ì—, UserDaoì™€ ConnectionMakerëŠ” DaoFactoryì˜ íë¦„ì—ì„œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— IoCë¼ ë³¼ ìˆ˜ ìˆë‹¤.

+ í”„ë ˆì„ì›Œí¬ VS ë¼ì´ë¸ŒëŸ¬ë¦¬

- í”„ë ˆì„ì›Œí¬
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ í”„ë ˆì„ì›Œí¬ì— ì˜í•´ ì‚¬ìš©ëœë‹¤.
    - í”„ë ˆì„ì›Œí¬ ìœ„ì— ê°œë°œí•œ í´ë˜ìŠ¤ë¥¼ ë“±ë¡í•˜ê³ , í”„ë ˆì„ì›Œí¬ê°€ ì£¼ë„í•˜ëŠ” ì¤‘ì— ê°œë°œìê°€ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ (IoC)
- ë¼ì´ë¸ŒëŸ¬ë¦¬
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ íë¦„ì„ ì§ì ‘ ì œì–´í•œë‹¤.
    - ex) ì½”ë“œì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ importí•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

## 1.5 ìŠ¤í”„ë§ì˜ IoC

### 1.5.1 ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ë¥¼ ì´ìš©í•œ IoC

> **ë¹ˆ(Bean)**
>
- ìŠ¤í”„ë§ì—ì„œ **ìŠ¤í”„ë§ì´ ì œì–´ê¶Œì„ ê°€ì§€ê³  ì§ì ‘ ë§Œë“¤ê³  ê´€ê³„ë¥¼ ë¶€ì—¬**í•˜ëŠ” ì˜¤ë¸Œì íŠ¸
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ê³¼ ê´€ê³„ì„¤ì •, ì‚¬ìš© ë“±ì„ ì œì–´í•˜ëŠ” `ì œì–´ì˜ ì—­ì „ì´ ì ìš©ëœ ì˜¤ë¸Œì íŠ¸`

> **ë¹ˆ íŒ©í† ë¦¬(Bean Factory) & ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸(Application Context)**
>
- **ë¹ˆ íŒ©í† ë¦¬**
    - ìŠ¤í”„ë§ì—ì„œ ë¹ˆì˜ ìƒì„±ê³¼ ê´€ê³„ ì„¤ì • ê°™ì€ ì œì–´ë¥¼ ë‹´ë‹¹í•˜ëŠ” IoC ì˜¤ë¸Œì íŠ¸
    - ë¹ˆì„ ìƒì„±í•˜ê³  ê´€ê³„ ì„¤ì •í•˜ëŠ” IoCì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ë‹´ë‹¹
- **ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸**
    - ë¹ˆ íŒ©í† ë¦¬ë¥¼ í™•ì¥í•œ ê²ƒìœ¼ë¡œ, IoC ë°©ì‹ì„ ë”°ë¼ ë§Œë“¤ì–´ì§„ ì¼ì¢…ì˜ ë¹ˆ íŒ©í† ë¦¬
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì˜ ì œì–´ ì‘ì—…ì„ ì´ê´„

> **@Configuration & @Bean**
>
- **@Configuration** : ë¹ˆ íŒ©í† ë¦¬ë¥¼ ìœ„í•œ ì˜¤ë¸Œì íŠ¸ ì„¤ì •ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì¸ì‹í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì• ë…¸í…Œì´ì…˜
- **@Bean** : ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ë©”ì†Œë“œì— ì‚¬ìš©í•˜ëŠ” ì• ë…¸í…Œì´ì…˜

```java
@Configuration
public class DaoFactory {
    @Bean
    public UserDao userDao() {
        return new UserDao(connectionMaker());
    }

    @Bean
    public ConnectionMaker connectionMaker() {
        return new MsConnectionMaker();
    }
}
```

> **ApplicationContext**
>

ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” ApplicationContext íƒ€ì…ì˜ ì˜¤ë¸Œì íŠ¸ë‹¤.

`@Configuration`ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ **AnnotationConfigApplicationContext**ë¥¼ ì´ìš©í•œë‹¤.

```java
public class UserDaoTest {
    public static void main(String[] args) {
		    ApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);
        // getBean()ì˜ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” Beanì˜ ì´ë¦„ì´ë‹¤. (@Beanì´ ë¶™ì€ ë©”ì†Œë“œëª…)
        // ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” ë¦¬í„´ íƒ€ì…ì´ë‹¤.
        UserDao dao = context.getBean("userDao", UserDao.class);
    }
}
```

## 1.5.2 ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì˜ ë™ì‘ë°©ì‹

ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸

== IoC ì»¨í…Œì´ë„ˆ

== ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ

== ë¹ˆ íŒ©í† ë¦¬

ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ IoCë¥¼ ì ìš©í•´ì„œ ê´€ë¦¬í•  ëª¨ë“  ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ìƒì„±ê³¼ ê´€ê³„ ì„¤ì •ì„ ë‹´ë‹¹í•œë‹¤.

ëŒ€ì‹  ApplicationContextëŠ” ì˜¤ë¸Œì íŠ¸ ìƒì„± ë° ê´€ê³„ ì„¤ì • ì½”ë“œê°€ ì—†ê³ , ì„¤ì • ì •ë³´(`@Configuration`, `@Bean`)ë¥¼ í†µí•´ ì–»ëŠ”ë‹¤.

![ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ë™ì‘ ë°©ì‹](https://github.com/user-attachments/assets/d58c9a4e-001c-4187-bf95-7cf2628dac9c)

# 6. ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬

---

> ğŸ“Œ
>
>ì‹±í´í†¤ íŒ¨í„´ì˜ ë‹¨ì ì„ ê·¹ë³µí•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ `ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬` ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ë¡œë¶€í„° ê°€ì ¸ì˜¨ ì˜¤ë¸Œì íŠ¸ë¥¼ ë¹„êµí•´ë³´ì.

```java
ApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);

        UserDao dao1 = context.getBean("userDao", UserDao.class);
        UserDao dao2 = context.getBean("userDao", UserDao.class);

        System.out.println(dao1 == dao2); // return true
```

ìŠ¤í”„ë§ì€ ì—¬ëŸ¬ ë²ˆì— ê±¸ì³ ë¹ˆì„ ìš”ì²­í•˜ë”ë¼ë„ ë§¤ë²ˆ ë™ì¼í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ëŒë ¤ì¤€ë‹¤.

> **ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¡œì„œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸**
>

ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” ì‹±ê¸€í†¤ì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” **ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬**ì´ë‹¤.

ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¹ˆ ì˜¤ë¸Œì íŠ¸ë¥¼ ëª¨ë‘ ì‹±ê¸€í†¤ìœ¼ë¡œ ë§Œë“ ë‹¤.

ì‹±ê¸€í†¤ìœ¼ë¡œ ë§Œë“œëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

- ìŠ¤í”„ë§ì´ ì£¼ë¡œ ì ìš©ë˜ëŠ” ëŒ€ìƒ â‡’ ì„œë²„ í™˜ê²½
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ì˜¬ ë•Œë§ˆë‹¤ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ë©´ ì„œë²„ ë¶€í•˜ê°€ ìƒê¸¸ ìˆ˜ë°–ì— ì—†ë‹¤.
- ì„œë¸”ë¦¿ì´ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ ì˜¤ë¸Œì íŠ¸ì´ë‹¤.
    - ì„œë¸”ë¦¿ì€ ëŒ€ë¶€ë¶„ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì‹±ê¸€í†¤ìœ¼ë¡œ ë™ì‘í•œë‹¤.
    - ì„œë¸”ë¦¿ í´ë˜ìŠ¤ë‹¹ í•˜ë‚˜ì˜ ì˜¤ë¸Œì íŠ¸ë§Œ ë§Œë“¤ì–´ ë‘ê³ , ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë‹´ë‹¹í•˜ëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ í•˜ë‚˜ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ê³µìœ í•´ ë™ì‹œì— ì‚¬ìš©í•œë‹¤.

**ì‹±ê¸€í†¤ íŒ¨í„´ì˜ í•œê³„**

- **ì‹±ê¸€í†¤ êµ¬í˜„ ë°©ë²•**
    - ìƒì„±ìë¥¼ privateìœ¼ë¡œ ë§Œë“¤ì–´ ì™¸ë¶€ ìƒì„± ëª»í•˜ê²Œ í•œë‹¤.
    - ìƒì„±ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì •ì  í•„ë“œë¥¼ ì •ì˜í•œë‹¤.
    - ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œì¸ getInstance()ë¥¼ ë§Œë“¤ê³  ì´ ë©”ì†Œë“œê°€ ìµœì´ˆ í˜¸ì¶œ ì‹œì ì—ì„œë§Œ ì˜¤ë¸Œì íŠ¸ê°€ ìƒì„±ë˜ê²Œ í•œë‹¤.

    ```java
    public class UserDao {
        
        private static UserDao INSTANCE;
        
        private UserDao() { ... }
        
        public static synchronized UserDao getInstance() {
            if (INSTANCE == null) INSTANCE = new UserDao();
            return INSTANCE;
        }
        ...
    }
    ```

- private ìƒì„±ìë¥¼ ê°–ê³  ìˆì–´ ìƒì†í•  ìˆ˜ ì—†ë‹¤.
    - ê°ì²´ì§€í–¥ ì¥ì ì¸ ìƒì†, ë‹¤í˜•ì„± ë¶ˆê°€
- ì‹±ê¸€í†¤ì€ í…ŒìŠ¤íŠ¸í•˜ê¸° í˜ë“¤ë‹¤.
- ì„œë²„ í™˜ê²½ì—ì„œ ì‹±ê¸€í†¤ì´ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§€ëŠ”ì§€ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤.
    - ì„œë²„ì˜ í´ë˜ìŠ¤ ë¡œë”ê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€, ì—¬ëŸ¬ ê°œì˜ JVMì— ë¶„ì‚°ë˜ëŠ”ì§€ ë“±ì˜ ì—¬ëŸ¬ ì´ìœ ë¡œ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤.
- ì‹±ê¸€í†¤ì˜ ì‚¬ìš©ì€ ì „ì—­ ìƒíƒœë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ ë°”ëŒì§í•˜ì§€ ëª»í•˜ë‹¤.
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì–´ë””ì„œë“  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

> **ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬**
>

ìŠ¤í”„ë§ì´ ì§ì ‘ ì‹±ê¸€í†¤ í˜•íƒœì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥

**ì¥ì **

- ì‹±ê¸€í†¤ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë  ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤ë„ public ìƒì„±ìë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
- í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ììœ ë¡­ê²Œ ì˜¤ë¸Œì íŠ¸ ë° Mock ì˜¤ë¸Œì œíŠ¸ë¥¼ ìƒì„± ë° ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.
- ìƒì„±ì íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤.

> **ì‹±ê¸€í†¤ê³¼ ì˜¤ë¸Œì íŠ¸ì˜ ìƒíƒœ**
>

ì‹±ê¸€í†¤ì´ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ í˜•íƒœì˜ ì˜¤ë¸Œì íŠ¸ë¡œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°, `ë¬´ìƒíƒœ ë°©ì‹(ìƒíƒœ ì •ë³´ë¥¼ ë‚´ë¶€ì— ê°–ì§€ ì•ŠìŒ)`ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ì•¼ í•œë‹¤.

ë‹¤ì¤‘ ì‚¬ìš©ìì˜ ìš”ì²­ì„ í•œêº¼ë²ˆì— ì²˜ë¦¬í•˜ëŠ” ìŠ¤ë ˆë“œë“¤ì´ ë™ì‹œì— ì‹±ê¸€í†¤ ì˜¤ë¸Œì íŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•˜ë‹¤. ë”°ë¼ì„œ ì‹±ê¸€í†¤ì€ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ëŠ” `ìƒíƒœìœ ì§€ ë°©ì‹ìœ¼ë¡œ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.`

**ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš©**

- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš© ê°€ëŠ¥
    - ì½ê¸° ì „ìš©ì˜ ê°’ : ì´ˆê¸°í™” ì‹œì ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥ ê°€ëŠ¥
    - ì‹±ê¸€í†¤ ì˜¤ë¸Œì íŠ¸(@Bean)
- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì‚¬ìš© ë¶ˆê°€
    - ë¦¬ì†ŒìŠ¤ë¡œë¶€í„° ìƒì„±í•œ ì •ë³´(ìì£¼ ë³€í•  ìˆ˜ ìˆëŠ” ê°’) : ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°, ë©”ì†Œë“œ ë¡œì»¬ë³€ìˆ˜ë¥¼ í™œìš©

```java
public class UserDao {
    // ì´ˆê¸°ì— ì„¤ì •í•˜ë©´ ì‚¬ìš© ì¤‘ì—ëŠ” ë°”ë€Œì§€ ì•ŠëŠ” ì½ê¸° ì „ìš© ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜
    private ConnectionMaker connectionMaker;
    
    // ë§¤ë²ˆ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë°”ë€ŒëŠ” ì •ë³´ë¥¼ ë‹´ì€ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ (ë¬¸ì œ ë°œìƒ)
    // private Connection c;
    // private User user;
    
    // X
    public User get(String id) {
        this.c = connection.makeConnection();
        ...
        this.user = new User();
        ...
    }

    // O (ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš©)
    public User get(User user) {
		    ...
    }
```

# 7. ì˜ì¡´ê´€ê³„ ì£¼ì… (Dependency Injection, DI)

---

> ğŸ“Œ
>
> **ì„¤ê³„ ì‹œì ê³¼ ì½”ë“œ**ì—ëŠ” í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ì‚¬ì´ì˜ `ëŠìŠ¨í•œ ì˜ì¡´ê´€ê³„`ë§Œ ë§Œë“¤ê³ ,
>
> **ëŸ°íƒ€ì„ ì‹œì—** ì‹¤ì œ ì‚¬ìš©í•  êµ¬ì²´ì ì¸ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ `ì œ3ì(DI ì»¨í…Œì´ë„ˆ)ì˜ ë„ì›€ìœ¼ë¡œ ì£¼ì…`ë°›ì•„ì„œ `ë™ì ì¸ ì˜ì¡´ ê´€ê³„`ë¥¼ ê°–ê²Œ í•´ì¤€ë‹¤.


## 1.7.1 ì œì–´ì˜ ì—­ì „ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…

ìŠ¤í”„ë§ IoC ê¸°ëŠ¥ì˜ ëŒ€í‘œì ì¸ ë™ì‘ì›ë¦¬ëŠ” ì£¼ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)ì´ë¼ ë¶ˆë¦°ë‹¤.

ìŠ¤í”„ë§ì˜ ê¸°ë³¸ì ì¸ ë™ì‘ì›ë¦¬ê°€ ëª¨ë‘ IoC ë°©ì‹ì´ì§€ë§Œ, ìŠ¤í”„ë§ì´ ì—¬íƒ€ í”„ë ˆì„ì›Œí¬ì™€ ì°¨ë³„í™”ë¼ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ ë°”ë¡œ â€œì˜ì¡´ê´€ê³„ ì£¼ì…â€ì´ë¼ í•  ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ IoC ì»¨í…Œì´ë„ˆë¼ê³  ë¶ˆë¦¬ë˜ ìŠ¤í”„ë§ì´ ì§€ê¸ˆì€ ì˜ì¡´ê´€ê³„ ì£¼ì… ì»¨í…Œì´ë„ˆ(DI ì»¨í…Œì´ë„ˆ) ë¼ê³  ë” ë§ì´ ë¶ˆë¦°ë‹¤.

## 1.7.2 ëŸ°íƒ€ì„ ì˜ì¡´ê´€ê³„ ì„¤ì •

### ì˜ì¡´ê´€ê³„

ë‘ ê°œì˜ í´ë˜ìŠ¤ ë˜ëŠ” ëª¨ë“ˆì´ ì˜ì¡´ê´€ê³„ì— ìˆë‹¤ë©´ í•­ìƒ ë°©í–¥ì„±ì´ ë¶€ì—¬ë˜ì–´ì•¼ í•œë‹¤.

UMLì€ ë‘ í´ë˜ìŠ¤ì˜ ì˜ì¡´ê´€ê³„ë¥¼ ì ì„ ìœ¼ë¡œ ëœ í™”ì‚´í‘œë¡œ í‘œí˜„í•œë‹¤.

![image 2](https://github.com/user-attachments/assets/a145bc56-1530-4cf6-a355-3ca408e6fc27)

ì¶œì²˜) [https://starrykss.tistory.com/1635](https://starrykss.tistory.com/1635), ClassAê°€ ClassBë¥¼ ì˜ì¡´í•œë‹¤.

ì˜ì¡´í•œë‹¤ëŠ” ê±´ ì˜ì¡´ëŒ€ìƒ(ClassB)ì´ ë³€í•˜ë©´ ClassAì—ë„ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ëœ»ì´ë‹¤.

### UserDaoì˜ ì˜ì¡´ê´€ê³„

![UserDaoì˜ ì˜ì¡´ê´€ê³„](https://github.com/user-attachments/assets/87efe4a6-9ec7-480a-9627-7e5946b8504b)
- UserDaoëŠ” ConnectionMakerì— ì˜ì¡´í•˜ê³  ìˆë‹¤.
    - ë”°ë¼ì„œ ConnectionMaker ì¸í„°í˜ì´ìŠ¤ê°€ ë³€í•œë‹¤ë©´ UserDaoëŠ” ì§ì ‘ì ì¸ ì˜í–¥ì„ ë°›ê²Œ ëœë‹¤.
    - í•˜ì§€ë§Œ ConnectionMakerë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ê°€ ë³€í™”ë˜ì–´ë„ UserDaoì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

â†’ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ì„œë§Œ ì˜ì¡´ê´€ê³„ë¥¼ ë§Œë“¤ì–´ë‘ë©´ êµ¬í˜„ í´ë˜ìŠ¤ì™€ ê´€ê³„ê°€ ëŠìŠ¨í•´ì§€ë©´ì„œ ê²°í•©ë„ê°€ ë‚®ì•„ì§„ë‹¤.

UMLì˜ ì˜ì¡´ê´€ê³„ëŠ” ì„¤ê³„ ëª¨ë¸ì˜ ê´€ì ì—ì„œ ì´ì•¼ê¸°ëœë‹¤. (ëª¨ë¸ì´ë‚˜ ì½”ë“œì—ì„œ ë“œëŸ¬ë‚˜ëŠ” ê²½ìš°)

ëŸ°íƒ€ì„ ì‹œì— ì˜¤ë¸Œì íŠ¸ ì‚¬ì´ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” ì˜ì¡´ê´€ê³„ë„ ì¡´ì¬í•œë‹¤.

- UserDaoì˜ ì˜¤ë¸Œì íŠ¸ê°€ ëŸ°íƒ€ì„ ì‹œì— ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ê°€ ì–´ë–¤ í´ë˜ìŠ¤ë¡œ êµ¬í˜„ëœê±´ì§€ ì•Œ ìˆ˜ ì—†ë‹¤. (ì½”ë“œ ì†ì—ì„œ ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ)

â†’ í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ê³  UserDao ì˜¤ë¸Œì íŠ¸ê°€ ë§Œë“¤ì–´ì§€ê³  ë‚˜ì„œ ëŸ°íƒ€ì„ ì‹œì— ì˜ì¡´ê´€ê³„ë¥¼ ë§ºëŠ” ëŒ€ìƒ,
ì¦‰, ì‹¤ì œ ì‚¬ìš©ëŒ€ìƒì¸ ì˜¤ë¸Œì íŠ¸ë¥¼ `ì˜ì¡´ ì˜¤ë¸Œì íŠ¸` ë¼ê³  í•œë‹¤.

ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ì™€ ì‚¬ìš©í•  ì£¼ì²´(í´ë¼ì´ì–¸íŠ¸)ë¥¼ ëŸ°íƒ€ì„ ì‹œ ì—°ê²°í•˜ëŠ” ì‘ì—…ì„ ë§í•œë‹¤.

ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ ì„¸ ê°€ì§€ ì¡°ê±´ì„ ì¶©ì¡±í•´ì•¼ í•œë‹¤.

1. í´ë˜ìŠ¤ ëª¨ë¸ì´ë‚˜ ì½”ë“œì—ëŠ” ëŸ°íƒ€ì„ ì‹œì ì˜ ì˜ì¡´ê´€ê³„ê°€ ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤.
2. ëŸ°íƒ€ì„ ì‹œì ì˜ ì˜ì¡´ê´€ê³„ëŠ” ì»¨í…Œì´ë„ˆë‚˜ íŒ©í† ë¦¬ ê°™ì€ ì œ3ì˜ ì¡´ì¬ê°€ ê²°ì •í•œë‹¤. (IoC)
3. ì˜ì¡´ê´€ê³„ëŠ” ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ì œê³µ(ì£¼ì…)í•´ì¤Œìœ¼ë¡œì¨ ë§Œë“¤ì–´ì§„ë‹¤.

> ğŸ”¥
>
> ì˜ì¡´ê´€ê³„ ì£¼ì…ì˜ í•µì‹¬ì€ ì„¤ê³„ ì‹œì ì—ì„œëŠ” ì•Œì§€ ëª»í–ˆë˜ ë‘ ì˜¤ë¸Œì íŠ¸ì˜ ê´€ê³„ë¥¼ ë§ºë„ë¡ ë„ì™€ì£¼ëŠ” ì œ3ì˜ ì¡´ì¬ê°€ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

### UserDao ì˜ì¡´ê´€ê³„ ì£¼ì…

```java
public UserDao() {
        this.connectionMaker = new MsConnectionMaker();
}
```

ì§€ê¸ˆê¹Œì§€ UserDao ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œëŠ” UserDaoê°€ ì‚¬ìš©í•  êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ë¥¼ ì•Œê³  ìˆì–´ì•¼í•˜ëŠ” ì ì´ì—ˆë‹¤.

ëŸ°íƒ€ì„ ì‹œì˜ ì˜ì¡´ê´€ê³„ê°€ ì½”ë“œ ì†ì— ì´ë¯¸ ê²°ì •ì´ ë˜ì–´ìˆëŠ” ê²ƒì´ë‹¤.

ê·¸ë˜ì„œ ì´ë¥¼ IoC ë°©ì‹ì„ ì¨ì„œ UserDaoì˜ ëŸ°íƒ€ì„ ì˜ì¡´ê´€ê³„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì½”ë“œë¥¼ ì œê±°í•˜ê³ , ì œ3ì˜ ì¡´ì¬ì— ëŸ°íƒ€ì„ ì˜ì¡´ê´€ê³„ ê²°ì • ê¶Œí•œì„ ìœ„ì„í•œë‹¤.

DI ì»¨í…Œì´ë„ˆëŠ” UserDaoë¥¼ ë§Œë“œëŠ” ì‹œì ì—ì„œ ìƒì„±ìì˜ íŒŒë¼ë¯¸í„°ë¡œ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì „ë‹¬í•œë‹¤. *ë ˆí¼ëŸ°ìŠ¤

ìƒì„±ì íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì „ë‹¬ë°›ì€ ëŸ°íƒ€ì„ ì˜ì¡´ê´€ê³„ë¥¼ ê°–ëŠ” ì˜¤ë¸Œì íŠ¸ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.

```java
public class UserDao {
    private ConnectionMaker connectionMaker;

    public UserDao(ConnectionMaker connectionMaker) {
        this.connectionMaker = connectionMaker;
    }
    ...
}
```

## 1.7.3 ì˜ì¡´ê´€ê³„ ê²€ìƒ‰ê³¼ ì£¼ì…

ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” IoC ë°©ë²•ì—ëŠ” ì˜ì¡´ê´€ê³„ ì£¼ì…ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

ì˜ì¡´ê´€ê³„ë¥¼ ë§ºëŠ” ë°©ë²•ì´ ì™¸ë¶€ë¡œë¶€í„°ì˜ ì£¼ì…ì´ ì•„ë‹ˆë¼ ìŠ¤ìŠ¤ë¡œ ê²€ìƒ‰ì„ ì´ìš©í•˜ëŠ” `ì˜ì¡´ê´€ê³„ ê²€ìƒ‰` ì´ë¼ê³  ë¶ˆë¦¬ëŠ” ê²ƒë„ ìˆë‹¤.

ì˜ì¡´ê´€ê³„ ê²€ìƒ‰ì€ ìì‹ ì´ í•„ìš”ë¡œ í•˜ëŠ” ê²ƒì„ ëŠ¥ë™ì ìœ¼ë¡œ ì°¾ëŠ”ë‹¤. (ìì‹ ì´ ì–´ë–¤ ì˜¤ë¸Œì íŠ¸ë¥¼ ì´ìš©í• ì§€ ê²°ì •í•˜ì§€ëŠ” ì•ŠìŒ)

ì¦‰ IoCì—ê²Œ ì˜¤ë¸Œì íŠ¸ ìƒì„±ê³¼ ê´€ê³„ì„¤ì •ì„ ë§¡ê¸°ì§€ë§Œ, ì´ë¥¼ ê°€ì ¸ì˜¬ ë•ŒëŠ” ìŠ¤ìŠ¤ë¡œ ì»¨í…Œì´ë„ˆì—ê²Œ ìš”ì²­í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.

```java
public UserDao() {
    DaoFactory daoFactory = new DaoFactory();
    this.connectionMaker = daoFactory.connectionMaker();
}
```

ìœ„ ì½”ë“œì—ì„œ UserDaoëŠ” ì—¬ì „íˆ ìì‹ ì´ ì–´ë–¤ ConnectionMaker ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ë¯¸ë¦¬ ì•Œì§€ ëª¨ë¥¸ë‹¤.

ì—¬ê¸°ì„œ connectionMakerì— ì™¸ë¶€ë¡œë¶€í„° ì£¼ì…(íŒŒë¼ë¯¸í„°)ì´ ì•„ë‹Œ ìŠ¤ìŠ¤ë¡œ IoC ì»¨í…Œì´ë„ˆì¸ DaoFactoryì—ê²Œ ìš”ì²­í•œë‹¤.

DaoFactoryê°€ ì•„ë‹Œ ìŠ¤í”„ë§ì˜ IoC ì»¨í…Œì´ë„ˆì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ëŠ” getBean() ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤. UserDaoë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ì˜ì¡´ê´€ê³„ ê²€ìƒ‰ ë°©ì‹ìœ¼ë¡œ ConnectionMaker ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•  ìˆ˜ ìˆë‹¤.

```java
public UserDao() {
    AnnotationConfigApplicationContext context = 
	    new AnnotationConfigApplicationContext(DaoFactory.class);
    this.connectionMaker = context.getBean("connectionMaker", ConnectionMaker.class);
}
```

**ì˜ì¡´ê´€ê³„ ê²€ìƒ‰ê³¼ ì£¼ì…ì˜ ì°¨ì´**

`ì˜ì¡´ê´€ê³„ ê²€ìƒ‰ ë°©ì‹`

- ê²€ìƒ‰í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ëŠ” ìì‹ ì´ ìŠ¤í”„ë§ì˜ ë¹ˆì¼ í•„ìš”ê°€ ì—†ë‹¤.
    - UserDaoëŠ” êµ³ì´ ìŠ¤í”„ë§ì´ ë§Œë“¤ê³  ê´€ë¦¬í•˜ëŠ” ë¹ˆì¼ í•„ìš”ê°€ ì—†ë‹¤.
    - ê·¸ëƒ¥ new UserDao() í•´ì„œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê³ , ConnectionMakerë§Œ ìŠ¤í”„ë§ì˜ ë¹ˆì´ë©´ ëœë‹¤.

`ì˜ì¡´ê´€ê³„ ì£¼ì…`

- UserDaoì™€ ConnectionMaker ì‚¬ì´ì— DIê°€ ì ìš©ë˜ë ¤ë©´, UserDaoë„ ë°˜ë“œì‹œ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì—¬ì•¼ í•œë‹¤.
    - ì»¨í…Œì´ë„ˆê°€ UserDaoì— ConnectionMakerë¥¼ ì£¼ì…í•´ì£¼ë ¤ë©´ UserDaoì˜ ìƒì„±ê³¼ ì´ˆê¸°í™” ê¶Œí•œì„ ê°–ê³  ìˆì–´ì•¼ í•œë‹¤.
        - ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ìŠ¤í”„ë§ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì—¬ì•¼ í•œë‹¤.

# 8. ìƒì„±ì ì£¼ì…ê³¼ ìˆ˜ì •ì ì£¼ì…

---

> ğŸ“Œ
>
> ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì£¼ì…í•  ë•Œ(DI) `ìƒì„±ì`ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ê³¼ `ìˆ˜ì •ì ë©”ì†Œë“œ`ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

> **í•„ë“œ ì£¼ì…**
>

IoC ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ Bean ì˜¤ë¸Œì íŠ¸ë¥¼ í•„ë“œë¡œ ì„ ì–¸í•œ ë’¤, `@Autowired` ì• ë…¸í…Œì´ì…˜ í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ë©´ ìë™ìœ¼ë¡œ ì£¼ì…ëœë‹¤.

```java
public class UserDao {

	  @Autowired
    private ConnectionMaker connectionMaker;
}
```

> **ìˆ˜ì •ì ë©”ì†Œë“œë¥¼ ì´ìš©í•œ ì£¼ì…**
>

ìˆ˜ì •ì(Setter) ë©”ì†Œë“œì˜ í•µì‹¬ ê¸°ëŠ¥ì€ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ëœ ê°’ì„ ë³´í†µ ë‚´ë¶€ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.

ìˆ˜ì •ì ë©”ì†Œë“œëŠ” ì™¸ë¶€ë¡œë¶€í„° ì œê³µë°›ì€ ì˜¤ë¸Œì íŠ¸ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì €ì¥í•´ë’€ë‹¤ê°€ ë‚´ë¶€ì˜ ë©”ì†Œë“œì—ì„œ ì‚¬ìš©í•˜ê²Œ í•˜ëŠ” DI ë°©ì‹ì—ì„œ í™œìš©í•  ìˆ˜ ìˆë‹¤.

```java
public class UserDao {
    private ConnectionMaker connectionMaker;
    
    @Autowired
    public void setConnectionMaker(ConnectionMaker connectionMaker) {
        this.connectionMaker = connectionMaker;
    }
    ...
}
```

> **ìƒì„±ì ì£¼ì…**
>

```java
public class UserDao {
    private ConnectionMaker connectionMaker;
    
    public UserDao(ConnectionMaker connectionMaker) {
        this.connectionMaker = connectionMaker;
    }
    ...
}
```

ë§Œì•½ ìƒì„±ìê°€ 2ê°œ ì´ìƒì¼ ê²½ìš°, `@Autowired`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ DIí•  ìƒì„±ìë¥¼ ì§€ì •í•œë‹¤. (Spring 4.3 ì´ìƒ)
