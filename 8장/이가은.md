# 8장 스프링이란 무엇인가?

스프링 프레임워크가 만들어진 이유, 존재 목적, 추구 가치?

# 8.1 스프링의 정의

---

: 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크

### 애플리케이션 프레임워크

- 특정 계층이나, 기술, 업무 분야에 국한되지 않고 애플리케이션의 전 영역을 포괄하는 범용적인 프레임워크.
- 개발 과정 빠르고 편리하며 효율적으로 진행하는 데 일차적인 목표를 두는 프레임워크.

> “항상 프레임워크 기반으로 접근하라” - 로드 존슨
> 

- 핵심 기술에 담긴 프로그래밍 모델을 일관되게 적용해서 엔터프라이즈 애플리케이션 전 계층과 전 영역에 전략과 기능을 제공해줌으로써 애플리케이션을 편리하게 개발하게 해주는 애플리케이션 프레임워크로 사용된다~

### 경량급

= 불필요하게 무겁지 않다. (↔ 자바 엔터프라이즈 기술의 불필요한 복잡함)

- 스프링은 가장 단순한 서버환경인 톰캣, 제티에서도 완벽 동작
    
    ⇒ 여타 프레임워크에서 동작하기 위해 만들어진 코드에 비해 상대적으로 작고 단순함.
    
    기술수준이 가볍다는 것이 아님!
    

### 자바 엔터프라이즈 개발을 편하게

- EJB의 문제점:  복잡함을 애플리케이션 개발에 끌고 옴.
- 스프링 : 자신이 작성하는 애플리케이션 로직에 더 많은 관심과 시간 쏟게 해줌. 어떻게 개발을 편하게 만들어주는지!

### 오픈소스

- 소스가 모두에게 공개되고 자유롭게 이용해도 된다.
- 맘대로 수정도 가능하고 수정된 제품과 소스를 다시 공개적 배포도 허용함.
- 스프링에서?
    - 개발 과정에 많은 사람이 자유롭게 참여함. (버그 신고/ 기능 추가 요구)
    - 빠르고 유연한 개발이 가능함.
    - 라이선스 비용 부담 없음.
    - 지속적이고 안정적 개발이 계속될지 불확실함의 오픈소스 단점을 “스프링 소스” 회사는 전문적인 기술 지원과 사용 제품을 제공하고 효율적 개발되도록 지원함으로써 해결함.

# 8.2 스프링의 목적

---

원래 엔터프라이즈 개발이란 편하지 않지만, 스프링을 통해 엔터프라이즈 애플리케이션 개발을 편하게 하려고 한다.

## 1. 엔터프라이즈 개발의 복잡함

### 복잡함의 근본적인 이유

1. 기술적인 제약조건과 요구사항이 늘어가기 때문이다
2. 엔터프라이즈 애플리케이션이 구현해야 할 핵심기능인 비즈니스 로직의 복잡함이 증가하기 때문.
- 기능 요구사항과 업무 정책 등이 바뀌기 때문에 애플리케이션을 자주 수정해줘야 함
    
    ⇒ 시스템 개발과 유지보수, 추가 개발 등의 작업에 대한 부담과 난이도 증가
    

### 복잡함을 가중시키는 원인

- 자바 엔터프라이즈 시스템 개발 어려운 이유
    - 근본적인 비즈니스 로직과 엔터프라이즈 기술 둘 다 복잡함이 한데 얽혀 있기 때문.
    - 개발자는 비즈니스 로직, 엔터프라이즈 기술 모두 신경써서 개발하면 과도한 부담과 복잡함은 몇 배로 가중되었음.

## 2. 복잡함을 해결하려는 도전

### 제거될 수 없는 근본적인 복잡함

- 기술적 복잡함을 해결하기 위해 보안 취향하게 방치? 말 안됨. 현실적으로 불가능.
- 제거대상이 아니고, 복잡함을 효과적으로 상대할 수 있는 전략과 기법이 필요. ⇒ 복잡함 분리하자.

### 실패한 해결책: EJB

- EJB 기본 전략: 복잡함 분리(성공)
- EJB의 목표 : 복잡함 신경쓰지 않고 비즈니스 로직 효과적 개발에 더 집중할 수 있게.
- EJB의 실패 이유
    - EJB 환경에서 동작하기 위해 특정 인터페이스를 구현하고, 특정 클래스를 상속하고, 서버에 종속적인 서비스를 통해서만 접근하고 사용이 가능하게 만드는 등의 개발 방식.
    
    ⇒ 환경과 스펙에 종속되는 코드로 만들어져야 하는 부담
    

### 비침투적인 방식을 통한 효과적인 해결책: 스프링

- 스프링의 목표 : EJB와 동일.
- 침투적인 기술 : 어떤 기술 적용시 그 기술과 관련된 코드나 규약 등이 코드에 등장하는 경우.
- 비침투적인 기술 : 기술 적용 사실이 코드에 직접 반영 안됨. ⇒ 코드 설계와 구현 방식 제한하지 않음.

⇒ 부가적인 부담 없이 복잡함 분리 가능.

## 3. 복잡함을 상대하는 스프링의 전략

### 기술적 복잡함을 상대하는 전략

- 문제 1 : 기술에 대한 접근 방식이 일관성이 없고 특정 환경에 종속적.
    - 스프링? 서비스 추상화!! 추상화로 로우레벨의 기술 구현 부분과 기술 사용하는 인터페이스 분리, 환경과 세부 기술에 독립적인 접근 인터페이스 제공.
        - 데이터 엑세스 예외에 대한 추상화 : 특정 기술이 발생시키는 예외에 종속되지 않고, 불필요하게 예외 잡아야 하거나 throws 선언 방지해줌.
        - 템플릿/콜백 패턴은 반복적인 작업 흐름과 API 사용 코드 제거해줌.
- 문제 2 : 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장한다
- 기술과 비즈니스 로직의 혼재로 복잡함 해결
    - 스프링의 접근 방법 : AOP
    - 최후까지 애플리케이션 로직을 담당하는 코드에 남아 있는 기술 관련 코드를 깔끔하게 분리해서 별도의 모듈로 관리하게 해주는 기술.

### 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략

- 순수하게 애플리케이션의 주요 기능과 비즈니스 로직을 담은 코드만 독립적으로 존재하게 됨.
- 엔터프라이즈 시스템 개발의 흐름은 점차로 비즈니스 로직은 애플리케이션 안에서 처리하도록 만드는 추세

### 핵심 도구: 객체지향과 DI

- “기본으로 돌아가자”
    - 스프링의 기본 전략
    - 자바의 기본인 객체지향에 충실한 설계가 가능하도록 단순한 오브젝트로 개발할 수 있고, 객체지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것

# 8.3 POJO 프로그래밍

- 스프링이 지향하는 목적?
- 분리됐지만 반드시 필요한 엔터프라이즈 서비스 기술을 POJO 방식으로 개발된 애플리케이션 핵심 로직을 담은 코드에 제공한다.

## 1. 스프링의 핵심 : POJO

- 스프링으로 개발한 애플리케이션의 기본 구조?
    - POJO 이용해서 만든 애플리케이션 코드
    - POJO 어떻게 관계 맺고 동작하는지 정의해놓은 설계정보
- IoC/DI, AOP, PSA:  애플리케이션을 POJO로 개발할 수 있게 해주는 가능기술.

## 2. POJO란 무엇인가?

간단한 자바오브젝트 사용 = POJO 방식 사용.

명칭을 달아서.. 성공적.

## 3. POJO의 조건

### 특정 규약에 종속되지 않는다.

- POJO는 자바 언어와 꼭 필요한 API 외에는 종속되지 않아야 함.
- 객체 지향 설계의 자유로운 적용 가능해야 함.

### 특정 환경에 종속되지 않는다.

## 4. POJO의 장점

- 특정 기술과 환경에 종속되지 않아 깔끔한 코드가 될 수 있음.
- 자동화된 테스트에 매우 유리.
- 객체지향적 설계를 자유롭게 적용할 수 있다는 것.

## 5. POJO 프레임워크

- 예: 스프링 프레임워크, 하이버네이트.
    - 스프링은 자신을 직접 노출하지 않으면서 애플리케이션을 POJO로 쉽게 개발할 수 있음.

- 스프링은 개발자들이 복잡한 엔터프라이즈 기술보다 객체지향적 설계와 원리에 좀 더 집중할 수 있도록 기회를 준다!

# 8.4 스프링의 기술

IoC/DI, AOP, PSA

## 1. IoC / DI

- 왜 오브젝트를 분리해서 만들고, 인터페이스를 두고 느슨하게 연결한 뒤 실제 사용할 대상은 DI를 통해 외부에서 지정하는 것일까? (new 로 생성하는 강한 결합보다 나은 점?)
    
    ⇒ 유연한 확장이 가능하게 하기 위해서. 
    
- A→B에서 B는 확장으로 자유롭게 변경될 수 있으며 A는 아무런 영향 받지 않고 그대로 유지 가능함

### DI 활용 방법

- 핵심기능 변경
    - DI 적용 : 의존 대상 구현 바꾸기.
- 핵심기능의 동적인 변경
    - 애플리케이션이 동작하는 중간에 의존 대상을 다이내믹하게 변경할 수 있음.
    - 확장과 재사용
- 부가기능의 추가
    - 예시 : 트랜잭션 기능 부여하기.
- 인터페이스의 변경
    - 사용하려고 하는 오브젝트가 가진 인터페이스가 클라이언트와 호환되지 않을 때, 그 사이의 인터페이스를 만들어서 클라이언트와 호환되도록 할 수 있음.
- 프록시
    - 필요한 시점에서 실제 사용할 오브젝트를 초기화하고, 리소스를 준비하게 해주는 지연된 로딩 적용하려면 프록시 필요.
- 템플릿과 콜백
    - 콜백을 얼마든지 만들어서 사용할 수 있고, 재사용도 가능함. (지저분한 코드 간결히)
- 싱글톤과 오브젝트 스코프
    - DI할 오브젝트의 생명주기 제어 가능. 스코프 제어 방법 또한 DI로. ?
- 테스트
    - 테스트할 대상이 의존하는 오브젝트 → 테스트 목적으로 만들어진 목오브젝트로 대체시 유용.
    - DI 위해 수정자 메소드를 사용시 테스트 코드에서 수동으로 목 오브젝트 주입 가능.

## 2. 애스펙트 지향 프로그래밍(AOP)

- AOP는 객체지향 기술의 한계(애플리케이션의 요구조건의 복잡함, 기술적 난해함) 을 극복하도록 도와주는 보조적 프로그래밍 기술.
- 일부 서비스는 순수 객체지향으로 POJO 조건 유지한 채로 적용하기 힘들 때도 AOP 필요.

### AOP의 적용 기법

- 다이내믹 프록시 사용
    - 적용하기 간편.
    - 메소드의 호출이 일어나는 지점뿐의 제약 존재.
- 자바 언어의 한계를 넘어서는 언어의 확장 이용하는 방법
    - 메소드 호출, 인스턴스 생성, 필드 액세스에 부가기능 제공 가능.

### AOP의 적용 단계

1. 미리 준비된 AOP 이용 ex)트랜잭션.
2. 전담팀을 통한 정책 AOP 적용
    - 적용하기 좋은 기능
        - 비즈니스 로직을 가진 오브젝트에 대한 보안
        - 특정 계층의 오브젝트 이용 전후의 작업 기록을 남기는 로깅
        - 데이터 추적을 위한 트레이싱
        - 특정 구간의 실시간 성능 모니터링과 같은 정책적으로 적용할만한 기능에 적용하기
3. AOP의 자유로운 이용
    - 구현하는 기능에 적용시 유용한 세부적인 AOP 이용 가능.

## 3. 포터블 서비스 추상화(PSA)

- 환경과 세부 기술의 변화에 관계없이 일관된 방식으로 기술에 접근할 수 있게 해줌.
- 스프링은 JavaEE를 기본 플랫폼으로 하는 자바 엔터프라이즈 개발에 주로 사용됨.
    
    ⇒ 다양한 JavaEE 기술에 의존적일 수밖에 없음.
    
    ⇒ POJO 코드가 그런 기술에 직접 노출되어 만들어지지 않음. 
    
    ⇒ 스프링은 서비스 추상화 기술을 제공함.
    
- 서비스 추상화 기술? DI의 응용 방법 중 한 가지.
- 구체적 기술에 종속되지 않게 하기 위해서도 사용되고, 주요 기능을 외부에서 제어하고 싶을 때 사용됨.